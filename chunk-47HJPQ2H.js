import{$a as Jt,Aa as gu,Da as yi,E as _i,Ea as qe,Fa as je,G as yr,Ga as pu,H as Qt,Ha as Qe,I as ho,Ia as Je,Ja as Ve,K as _n,Ka as L,La as k,M as xe,Ma as Ge,Na as ae,Oa as ce,Pa as yn,Qa as wr,R as ut,Ra as Ce,S as ht,Sa as br,Ta as ne,Ua as ze,Va as N,Wa as ke,X as vr,Xa as yo,Ya as vi,Za as Er,a as z,aa as Ie,ab as _u,b as te,ba as Rt,bb as vo,ca as fo,cb as yu,da as mo,ea as go,eb as wo,f as hu,fb as bo,i as du,la as U,n as fu,qa as po,ra as we,s as mu,va as Ne,wa as _o,xa as Ue,ya as Ot}from"./chunk-PVNIASIH.js";var Eo=[{id:"17",name:"Edinson",defense:4,creation:2,offense:2,enabled:!0,order:1,image:""},{id:"2",name:"Jhonnier",defense:4,creation:2,offense:1,enabled:!0,order:2,image:""},{id:"3",name:"Goku",defense:4,creation:2,offense:2,enabled:!0,order:3,image:""},{id:"11",name:"Jorge",defense:2,creation:2,offense:3,enabled:!0,order:4,image:""},{id:"5",name:"Wilson",defense:2,creation:2,offense:3,enabled:!0,order:5,image:""},{id:"4",name:"Jhonatan",defense:2,creation:2,offense:3,enabled:!0,order:6,image:""},{id:"10",name:"Yhonier",defense:2,creation:3,offense:4,enabled:!0,order:7,image:""},{id:"1",name:"Carlos",defense:2,creation:2,offense:3,enabled:!0,order:8,image:""},{id:"16",name:"Oscar",defense:4,creation:2,offense:1,enabled:!0,order:9,image:""},{id:"18",name:"Fernando",defense:4,creation:2,offense:2,enabled:!0,order:10,image:""},{id:"15",name:"Willian",defense:1,creation:2,offense:2,enabled:!0,order:11,image:""},{id:"6",name:"Lucho",defense:2,creation:2,offense:3,enabled:!0,order:12,image:""},{id:"19",name:"Quiira",defense:2,creation:2,offense:3,enabled:!0,order:13,image:""},{id:"12",name:"Ronal",defense:2,creation:2,offense:2,enabled:!0,order:14,image:""},{id:"7",name:"Camilo",defense:2,creation:3,offense:2,enabled:!1,order:15,image:""},{id:"8",name:"Sergio",defense:2,creation:3,offense:3,enabled:!1,order:16,image:""},{id:"9",name:"Beken",defense:2,creation:3,offense:4,enabled:!1,order:17,image:""},{id:"13",name:"H Javier",defense:2,creation:3,offense:4,enabled:!1,order:18,image:""},{id:"14",name:"Acosta",defense:3,creation:3,offense:2,enabled:!1,order:19,image:""}];var vu=[{id:"gk1",name:"Ivan",skill:4,selected:!0},{id:"gk2",name:"Leo",skill:4,selected:!0},{id:"gk3",name:"gk3",skill:4,selected:!1},{id:"gk4",name:"gk4",skill:4,selected:!1}];var vn=class n{storageKey="futbol-goalkeepers";goalkeepers=Ie(vu);maxSelected=2;selectedGoalkeepers=()=>this.goalkeepers().filter(e=>e.selected);saveGoalkeepers(){localStorage.setItem(this.storageKey,JSON.stringify(this.goalkeepers()))}toggleGoalkeeper(e){let t=this.goalkeepers().find(i=>i.id===e);if(!t)return;let r=this.selectedGoalkeepers().length;!t.selected&&r>=this.maxSelected||(this.goalkeepers.update(i=>i.map(o=>o.id===e?te(z({},o),{selected:!o.selected}):o)),this.saveGoalkeepers())}canSelect(e){let t=this.goalkeepers().find(r=>r.id===e);return t?t.selected?!0:this.selectedGoalkeepers().length<this.maxSelected:!1}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Qt({token:n,factory:n.\u0275fac,providedIn:"root"})};var wu=()=>{};var Iu=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Dm=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Cu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,m=o>>2,v=(o&3)<<4|u>>4,I=(u&15)<<2|f>>6,S=f&63;h||(S=64,a||(I=64)),r.push(t[m],t[v],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Iu(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Dm(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||v==null)throw new Io;let I=o<<2|u>>4;if(r.push(I),f!==64){let S=u<<4&240|f>>2;if(r.push(S),v!==64){let V=f<<6&192|v;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Io=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Mm=function(n){let e=Iu(n);return Cu.encodeByteArray(e,!0)},Cr=function(n){return Mm(n).replace(/\./g,"")},Tu=function(n){try{return Cu.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Au(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Rm=()=>Au().__FIREBASE_DEFAULTS__,Om=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},km=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Tu(n[1]);return e&&JSON.parse(e)},Co=()=>{try{return wu()||Rm()||Om()||km()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nm=n=>Co()?.emulatorHosts?.[n],Pu=n=>{let e=Nm(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},To=()=>Co()?.config;var wi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function bi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Su(n){return(await fetch(n,{credentials:"include"})).ok}function xu(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=z({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Cr(JSON.stringify(t)),Cr(JSON.stringify(a)),""].join(".")}var Ir={};function Fm(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ir))Ir[e]?n.emulator.push(e):n.prod.push(e);return n}function Lm(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var bu=!1;function Vu(n,e){if(typeof window>"u"||typeof document>"u"||!bi(window.location.host)||Ir[n]===e||Ir[n]||bu)return;Ir[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",o=Fm().prod.length>0;function a(){let I=document.getElementById(r);I&&I.remove()}function u(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function h(I,S){I.setAttribute("width","24"),I.setAttribute("id",S),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function f(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{bu=!0,a()},I}function m(I,S){I.setAttribute("id",S),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function v(){let I=Lm(r),S=t("text"),V=document.getElementById(S)||document.createElement("span"),O=t("learnmore"),M=document.getElementById(O)||document.createElement("a"),Q=t("preprendIcon"),Y=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let Z=I.element;u(Z),m(M,O);let Re=f();h(Y,Q),Z.append(Y,V,M,Re),document.body.appendChild(Z)}o?(V.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Du(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bm(){let n=Co()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mu(){return!Bm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ao(){try{return typeof indexedDB=="object"}catch{return!1}}function Ru(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Um="FirebaseError",ft=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Um,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tr.prototype.create)}},Tr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?qm(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new ft(i,u,r)}};function qm(n,e){return n.replace(jm,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jm=/\{\$([^}]+)}/g;function Yt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(Eu(o)&&Eu(a)){if(!Yt(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Eu(n){return n!==null&&typeof n=="object"}var uv=14400*1e3;function Ye(n){return n&&n._delegate?n._delegate:n}var mt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xt="[DEFAULT]";var Po=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new wi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zm(e))try{this.getOrInitializeService({instanceIdentifier:Xt})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xt){return this.instances.has(e)}getOptions(e=Xt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gm(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xt){return this.component?this.component.multipleInstances?e:Xt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gm(n){return n===Xt?void 0:n}function zm(n){return n.instantiationMode==="EAGER"}var Ei=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Po(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $m=[],H=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(H||{}),Km={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},Hm=H.INFO,Wm={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Qm=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Wm[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},wn=class{constructor(e){this.name=e,this._logLevel=Hm,this._logHandler=Qm,this._userLogHandler=null,$m.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Km[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}};var Jm=(n,e)=>e.some(t=>n instanceof t),Ou,ku;function Ym(){return Ou||(Ou=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xm(){return ku||(ku=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Nu=new WeakMap,xo=new WeakMap,Fu=new WeakMap,So=new WeakMap,Do=new WeakMap;function Zm(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Xe(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Nu.set(t,n)}).catch(()=>{}),Do.set(e,n),e}function eg(n){if(xo.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});xo.set(n,e)}var Vo={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xo.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Fu.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Lu(n){Vo=n(Vo)}function tg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ii(this),e,...t);return Fu.set(r,e.sort?e.sort():[e]),Xe(r)}:Xm().includes(n)?function(...e){return n.apply(Ii(this),e),Xe(Nu.get(this))}:function(...e){return Xe(n.apply(Ii(this),e))}}function ng(n){return typeof n=="function"?tg(n):(n instanceof IDBTransaction&&eg(n),Jm(n,Ym())?new Proxy(n,Vo):n)}function Xe(n){if(n instanceof IDBRequest)return Zm(n);if(So.has(n))return So.get(n);let e=ng(n);return e!==n&&(So.set(n,e),Do.set(e,n)),e}var Ii=n=>Do.get(n);function Uu(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=Xe(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Xe(a.result),h.oldVersion,h.newVersion,Xe(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var rg=["get","getKey","getAll","getAllKeys","count"],ig=["put","add","delete","clear"],Mo=new Map;function Bu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mo.get(e))return Mo.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ig.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rg.includes(t)))return;let o=async function(a,...u){let h=this.transaction(a,i?"readwrite":"readonly"),f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&h.done]))[0]};return Mo.set(e,o),o}Lu(n=>te(z({},n),{get:(e,t,r)=>Bu(e,t)||n.get(e,t,r),has:(e,t)=>!!Bu(e,t)||n.has(e,t)}));var Oo=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sg(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function sg(n){return n.getComponent()?.type==="VERSION"}var ko="@firebase/app",qu="0.14.7";var gt=new wn("@firebase/app"),og="@firebase/app-compat",ag="@firebase/analytics-compat",cg="@firebase/analytics",lg="@firebase/app-check-compat",ug="@firebase/app-check",hg="@firebase/auth",dg="@firebase/auth-compat",fg="@firebase/database",mg="@firebase/data-connect",gg="@firebase/database-compat",pg="@firebase/functions",_g="@firebase/functions-compat",yg="@firebase/installations",vg="@firebase/installations-compat",wg="@firebase/messaging",bg="@firebase/messaging-compat",Eg="@firebase/performance",Ig="@firebase/performance-compat",Cg="@firebase/remote-config",Tg="@firebase/remote-config-compat",Ag="@firebase/storage",Pg="@firebase/storage-compat",Sg="@firebase/firestore",xg="@firebase/ai",Vg="@firebase/firestore-compat",Dg="firebase",Mg="12.8.0";var No="[DEFAULT]",Rg={[ko]:"fire-core",[og]:"fire-core-compat",[cg]:"fire-analytics",[ag]:"fire-analytics-compat",[ug]:"fire-app-check",[lg]:"fire-app-check-compat",[hg]:"fire-auth",[dg]:"fire-auth-compat",[fg]:"fire-rtdb",[mg]:"fire-data-connect",[gg]:"fire-rtdb-compat",[pg]:"fire-fn",[_g]:"fire-fn-compat",[yg]:"fire-iid",[vg]:"fire-iid-compat",[wg]:"fire-fcm",[bg]:"fire-fcm-compat",[Eg]:"fire-perf",[Ig]:"fire-perf-compat",[Cg]:"fire-rc",[Tg]:"fire-rc-compat",[Ag]:"fire-gcs",[Pg]:"fire-gcs-compat",[Sg]:"fire-fst",[Vg]:"fire-fst-compat",[xg]:"fire-vertex","fire-js":"fire-js",[Dg]:"fire-js-all"};var Ci=new Map,Og=new Map,Fo=new Map;function ju(n,e){try{n.container.addComponent(e)}catch(t){gt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ar(n){let e=n.name;if(Fo.has(e))return gt.debug(`There were multiple attempts to register component ${e}.`),!1;Fo.set(e,n);for(let t of Ci.values())ju(t,n);for(let t of Og.values())ju(t,n);return!0}function Ku(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hu(n){return n==null?!1:n.settings!==void 0}var kg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kt=new Tr("app","Firebase",kg);var Lo=class{constructor(e,t,r){this._isDeleted=!1,this._options=z({},e),this._config=z({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}};var Wu=Mg;function qo(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=z({name:No,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw kt.create("bad-app-name",{appName:String(i)});if(t||(t=To()),!t)throw kt.create("no-options");let o=Ci.get(i);if(o){if(Yt(t,o.options)&&Yt(r,o.config))return o;throw kt.create("duplicate-app",{appName:i})}let a=new Ei(i);for(let h of Fo.values())a.addComponent(h);let u=new Lo(t,r,a);return Ci.set(i,u),u}function Qu(n=No){let e=Ci.get(n);if(!e&&n===No&&To())return qo();if(!e)throw kt.create("no-app",{appName:n});return e}function Nt(n,e,t){let r=Rg[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gt.warn(a.join(" "));return}Ar(new mt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Ng="firebase-heartbeat-database",Fg=1,Pr="firebase-heartbeat-store",Ro=null;function Ju(){return Ro||(Ro=Uu(Ng,Fg,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pr)}catch(t){console.warn(t)}}}}).catch(n=>{throw kt.create("idb-open",{originalErrorMessage:n.message})})),Ro}async function Lg(n){try{let t=(await Ju()).transaction(Pr),r=await t.objectStore(Pr).get(Yu(n));return await t.done,r}catch(e){if(e instanceof ft)gt.warn(e.message);else{let t=kt.create("idb-get",{originalErrorMessage:e?.message});gt.warn(t.message)}}}async function Gu(n,e){try{let r=(await Ju()).transaction(Pr,"readwrite");await r.objectStore(Pr).put(e,Yu(n)),await r.done}catch(t){if(t instanceof ft)gt.warn(t.message);else{let r=kt.create("idb-set",{originalErrorMessage:t?.message});gt.warn(r.message)}}}function Yu(n){return`${n.name}!${n.options.appId}`}var Bg=1024,Ug=30,Bo=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Uo(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Ug){let i=jg(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=zu(),{heartbeatsToSend:t,unsentEntries:r}=qg(this._heartbeatsCache.heartbeats),i=Cr(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return gt.warn(e),""}}};function zu(){return new Date().toISOString().substring(0,10)}function qg(n,e=Bg){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),$u(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$u(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Uo=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ao()?Ru().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Lg(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Gu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Gu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function $u(n){return Cr(JSON.stringify({version:2,heartbeats:n})).length}function jg(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Gg(n){Ar(new mt("platform-logger",e=>new Oo(e),"PRIVATE")),Ar(new mt("heartbeat",e=>new Bo(e),"PRIVATE")),Nt(ko,qu,n),Nt(ko,qu,"esm2020"),Nt("fire-js","")}Gg("");var zg="firebase",$g="12.8.0";Nt(zg,$g,"app");var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zu={};var pt,jo;(function(){var n;function e(w,g){function _(){}_.prototype=g.prototype,w.F=g.prototype,w.prototype=new _,w.prototype.constructor=w,w.D=function(b,y,C){for(var p=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)p[Se-2]=arguments[Se];return g.prototype[y].apply(b,p)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,g,_){_||(_=0);let b=Array(16);if(typeof g=="string")for(var y=0;y<16;++y)b[y]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(y=0;y<16;++y)b[y]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=w.g[0],_=w.g[1],y=w.g[2];let C=w.g[3],p;p=g+(C^_&(y^C))+b[0]+3614090360&4294967295,g=_+(p<<7&4294967295|p>>>25),p=C+(y^g&(_^y))+b[1]+3905402710&4294967295,C=g+(p<<12&4294967295|p>>>20),p=y+(_^C&(g^_))+b[2]+606105819&4294967295,y=C+(p<<17&4294967295|p>>>15),p=_+(g^y&(C^g))+b[3]+3250441966&4294967295,_=y+(p<<22&4294967295|p>>>10),p=g+(C^_&(y^C))+b[4]+4118548399&4294967295,g=_+(p<<7&4294967295|p>>>25),p=C+(y^g&(_^y))+b[5]+1200080426&4294967295,C=g+(p<<12&4294967295|p>>>20),p=y+(_^C&(g^_))+b[6]+2821735955&4294967295,y=C+(p<<17&4294967295|p>>>15),p=_+(g^y&(C^g))+b[7]+4249261313&4294967295,_=y+(p<<22&4294967295|p>>>10),p=g+(C^_&(y^C))+b[8]+1770035416&4294967295,g=_+(p<<7&4294967295|p>>>25),p=C+(y^g&(_^y))+b[9]+2336552879&4294967295,C=g+(p<<12&4294967295|p>>>20),p=y+(_^C&(g^_))+b[10]+4294925233&4294967295,y=C+(p<<17&4294967295|p>>>15),p=_+(g^y&(C^g))+b[11]+2304563134&4294967295,_=y+(p<<22&4294967295|p>>>10),p=g+(C^_&(y^C))+b[12]+1804603682&4294967295,g=_+(p<<7&4294967295|p>>>25),p=C+(y^g&(_^y))+b[13]+4254626195&4294967295,C=g+(p<<12&4294967295|p>>>20),p=y+(_^C&(g^_))+b[14]+2792965006&4294967295,y=C+(p<<17&4294967295|p>>>15),p=_+(g^y&(C^g))+b[15]+1236535329&4294967295,_=y+(p<<22&4294967295|p>>>10),p=g+(y^C&(_^y))+b[1]+4129170786&4294967295,g=_+(p<<5&4294967295|p>>>27),p=C+(_^y&(g^_))+b[6]+3225465664&4294967295,C=g+(p<<9&4294967295|p>>>23),p=y+(g^_&(C^g))+b[11]+643717713&4294967295,y=C+(p<<14&4294967295|p>>>18),p=_+(C^g&(y^C))+b[0]+3921069994&4294967295,_=y+(p<<20&4294967295|p>>>12),p=g+(y^C&(_^y))+b[5]+3593408605&4294967295,g=_+(p<<5&4294967295|p>>>27),p=C+(_^y&(g^_))+b[10]+38016083&4294967295,C=g+(p<<9&4294967295|p>>>23),p=y+(g^_&(C^g))+b[15]+3634488961&4294967295,y=C+(p<<14&4294967295|p>>>18),p=_+(C^g&(y^C))+b[4]+3889429448&4294967295,_=y+(p<<20&4294967295|p>>>12),p=g+(y^C&(_^y))+b[9]+568446438&4294967295,g=_+(p<<5&4294967295|p>>>27),p=C+(_^y&(g^_))+b[14]+3275163606&4294967295,C=g+(p<<9&4294967295|p>>>23),p=y+(g^_&(C^g))+b[3]+4107603335&4294967295,y=C+(p<<14&4294967295|p>>>18),p=_+(C^g&(y^C))+b[8]+1163531501&4294967295,_=y+(p<<20&4294967295|p>>>12),p=g+(y^C&(_^y))+b[13]+2850285829&4294967295,g=_+(p<<5&4294967295|p>>>27),p=C+(_^y&(g^_))+b[2]+4243563512&4294967295,C=g+(p<<9&4294967295|p>>>23),p=y+(g^_&(C^g))+b[7]+1735328473&4294967295,y=C+(p<<14&4294967295|p>>>18),p=_+(C^g&(y^C))+b[12]+2368359562&4294967295,_=y+(p<<20&4294967295|p>>>12),p=g+(_^y^C)+b[5]+4294588738&4294967295,g=_+(p<<4&4294967295|p>>>28),p=C+(g^_^y)+b[8]+2272392833&4294967295,C=g+(p<<11&4294967295|p>>>21),p=y+(C^g^_)+b[11]+1839030562&4294967295,y=C+(p<<16&4294967295|p>>>16),p=_+(y^C^g)+b[14]+4259657740&4294967295,_=y+(p<<23&4294967295|p>>>9),p=g+(_^y^C)+b[1]+2763975236&4294967295,g=_+(p<<4&4294967295|p>>>28),p=C+(g^_^y)+b[4]+1272893353&4294967295,C=g+(p<<11&4294967295|p>>>21),p=y+(C^g^_)+b[7]+4139469664&4294967295,y=C+(p<<16&4294967295|p>>>16),p=_+(y^C^g)+b[10]+3200236656&4294967295,_=y+(p<<23&4294967295|p>>>9),p=g+(_^y^C)+b[13]+681279174&4294967295,g=_+(p<<4&4294967295|p>>>28),p=C+(g^_^y)+b[0]+3936430074&4294967295,C=g+(p<<11&4294967295|p>>>21),p=y+(C^g^_)+b[3]+3572445317&4294967295,y=C+(p<<16&4294967295|p>>>16),p=_+(y^C^g)+b[6]+76029189&4294967295,_=y+(p<<23&4294967295|p>>>9),p=g+(_^y^C)+b[9]+3654602809&4294967295,g=_+(p<<4&4294967295|p>>>28),p=C+(g^_^y)+b[12]+3873151461&4294967295,C=g+(p<<11&4294967295|p>>>21),p=y+(C^g^_)+b[15]+530742520&4294967295,y=C+(p<<16&4294967295|p>>>16),p=_+(y^C^g)+b[2]+3299628645&4294967295,_=y+(p<<23&4294967295|p>>>9),p=g+(y^(_|~C))+b[0]+4096336452&4294967295,g=_+(p<<6&4294967295|p>>>26),p=C+(_^(g|~y))+b[7]+1126891415&4294967295,C=g+(p<<10&4294967295|p>>>22),p=y+(g^(C|~_))+b[14]+2878612391&4294967295,y=C+(p<<15&4294967295|p>>>17),p=_+(C^(y|~g))+b[5]+4237533241&4294967295,_=y+(p<<21&4294967295|p>>>11),p=g+(y^(_|~C))+b[12]+1700485571&4294967295,g=_+(p<<6&4294967295|p>>>26),p=C+(_^(g|~y))+b[3]+2399980690&4294967295,C=g+(p<<10&4294967295|p>>>22),p=y+(g^(C|~_))+b[10]+4293915773&4294967295,y=C+(p<<15&4294967295|p>>>17),p=_+(C^(y|~g))+b[1]+2240044497&4294967295,_=y+(p<<21&4294967295|p>>>11),p=g+(y^(_|~C))+b[8]+1873313359&4294967295,g=_+(p<<6&4294967295|p>>>26),p=C+(_^(g|~y))+b[15]+4264355552&4294967295,C=g+(p<<10&4294967295|p>>>22),p=y+(g^(C|~_))+b[6]+2734768916&4294967295,y=C+(p<<15&4294967295|p>>>17),p=_+(C^(y|~g))+b[13]+1309151649&4294967295,_=y+(p<<21&4294967295|p>>>11),p=g+(y^(_|~C))+b[4]+4149444226&4294967295,g=_+(p<<6&4294967295|p>>>26),p=C+(_^(g|~y))+b[11]+3174756917&4294967295,C=g+(p<<10&4294967295|p>>>22),p=y+(g^(C|~_))+b[2]+718787259&4294967295,y=C+(p<<15&4294967295|p>>>17),p=_+(C^(y|~g))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(y+(p<<21&4294967295|p>>>11))&4294967295,w.g[2]=w.g[2]+y&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.v=function(w,g){g===void 0&&(g=w.length);let _=g-this.blockSize,b=this.C,y=this.h,C=0;for(;C<g;){if(y==0)for(;C<=_;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<g;)if(b[y++]=w.charCodeAt(C++),y==this.blockSize){i(this,b),y=0;break}}else for(;C<g;)if(b[y++]=w[C++],y==this.blockSize){i(this,b),y=0;break}}this.h=y,this.o+=g},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;g=this.o*8;for(var _=w.length-8;_<w.length;++_)w[_]=g&255,g/=256;for(this.v(w),w=Array(16),g=0,_=0;_<4;++_)for(let b=0;b<32;b+=8)w[g++]=this.g[_]>>>b&255;return w};function o(w,g){var _=u;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=g(w)}function a(w,g){this.h=g;let _=[],b=!0;for(let y=w.length-1;y>=0;y--){let C=w[y]|0;b&&C==g||(_[y]=C,b=!1)}this.g=_}var u={};function h(w){return-128<=w&&w<128?o(w,function(g){return new a([g|0],g<0?-1:0)}):new a([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return v;if(w<0)return M(f(-w));let g=[],_=1;for(let b=0;w>=_;b++)g[b]=w/_|0,_*=4294967296;return new a(g,0)}function m(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return M(m(w.substring(1),g));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let _=f(Math.pow(g,8)),b=v;for(let C=0;C<w.length;C+=8){var y=Math.min(8,w.length-C);let p=parseInt(w.substring(C,C+y),g);y<8?(y=f(Math.pow(g,y)),b=b.j(y).add(f(p))):(b=b.j(_),b=b.add(f(p)))}return b}var v=h(0),I=h(1),S=h(16777216);n=a.prototype,n.m=function(){if(O(this))return-M(this).m();let w=0,g=1;for(let _=0;_<this.g.length;_++){let b=this.i(_);w+=(b>=0?b:4294967296+b)*g,g*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(V(this))return"0";if(O(this))return"-"+M(this).toString(w);let g=f(Math.pow(w,6));var _=this;let b="";for(;;){let y=Re(_,g).g;_=Q(_,y.j(g));let C=((_.g.length>0?_.g[0]:_.h)>>>0).toString(w);if(_=y,V(_))return C+b;for(;C.length<6;)C="0"+C;b=C+b}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function V(w){if(w.h!=0)return!1;for(let g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function O(w){return w.h==-1}n.l=function(w){return w=Q(this,w),O(w)?-1:V(w)?0:1};function M(w){let g=w.g.length,_=[];for(let b=0;b<g;b++)_[b]=~w.g[b];return new a(_,~w.h).add(I)}n.abs=function(){return O(this)?M(this):this},n.add=function(w){let g=Math.max(this.g.length,w.g.length),_=[],b=0;for(let y=0;y<=g;y++){let C=b+(this.i(y)&65535)+(w.i(y)&65535),p=(C>>>16)+(this.i(y)>>>16)+(w.i(y)>>>16);b=p>>>16,C&=65535,p&=65535,_[y]=p<<16|C}return new a(_,_[_.length-1]&-2147483648?-1:0)};function Q(w,g){return w.add(M(g))}n.j=function(w){if(V(this)||V(w))return v;if(O(this))return O(w)?M(this).j(M(w)):M(M(this).j(w));if(O(w))return M(this.j(M(w)));if(this.l(S)<0&&w.l(S)<0)return f(this.m()*w.m());let g=this.g.length+w.g.length,_=[];for(var b=0;b<2*g;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(let y=0;y<w.g.length;y++){let C=this.i(b)>>>16,p=this.i(b)&65535,Se=w.i(y)>>>16,At=w.i(y)&65535;_[2*b+2*y]+=p*At,Y(_,2*b+2*y),_[2*b+2*y+1]+=C*At,Y(_,2*b+2*y+1),_[2*b+2*y+1]+=p*Se,Y(_,2*b+2*y+1),_[2*b+2*y+2]+=C*Se,Y(_,2*b+2*y+2)}for(w=0;w<g;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=g;w<2*g;w++)_[w]=0;return new a(_,0)};function Y(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function Z(w,g){this.g=w,this.h=g}function Re(w,g){if(V(g))throw Error("division by zero");if(V(w))return new Z(v,v);if(O(w))return g=Re(M(w),g),new Z(M(g.g),M(g.h));if(O(g))return g=Re(w,M(g)),new Z(M(g.g),g.h);if(w.g.length>30){if(O(w)||O(g))throw Error("slowDivide_ only works with positive integers.");for(var _=I,b=g;b.l(w)<=0;)_=Be(_),b=Be(b);var y=ve(_,1),C=ve(b,1);for(b=ve(b,2),_=ve(_,2);!V(b);){var p=C.add(b);p.l(w)<=0&&(y=y.add(_),C=p),b=ve(b,1),_=ve(_,1)}return g=Q(w,y.j(g)),new Z(y,g)}for(y=v;w.l(g)>=0;){for(_=Math.max(1,Math.floor(w.m()/g.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),C=f(_),p=C.j(g);O(p)||p.l(w)>0;)_-=b,C=f(_),p=C.j(g);V(C)&&(C=I),y=y.add(C),w=Q(w,p)}return new Z(y,w)}n.B=function(w){return Re(this,w).h},n.and=function(w){let g=Math.max(this.g.length,w.g.length),_=[];for(let b=0;b<g;b++)_[b]=this.i(b)&w.i(b);return new a(_,this.h&w.h)},n.or=function(w){let g=Math.max(this.g.length,w.g.length),_=[];for(let b=0;b<g;b++)_[b]=this.i(b)|w.i(b);return new a(_,this.h|w.h)},n.xor=function(w){let g=Math.max(this.g.length,w.g.length),_=[];for(let b=0;b<g;b++)_[b]=this.i(b)^w.i(b);return new a(_,this.h^w.h)};function Be(w){let g=w.g.length+1,_=[];for(let b=0;b<g;b++)_[b]=w.i(b)<<1|w.i(b-1)>>>31;return new a(_,w.h)}function ve(w,g){let _=g>>5;g%=32;let b=w.g.length-_,y=[];for(let C=0;C<b;C++)y[C]=g>0?w.i(C+_)>>>g|w.i(C+_+1)<<32-g:w.i(C+_);return new a(y,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,jo=Zu.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,pt=Zu.Integer=a}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});var Ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_t={};var Go,Kg,bn,zo,Sr,Ai,$o,Ko,Ho;(function(){var n,e=Object.defineProperty;function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ti=="object"&&Ti];for(var c=0;c<s.length;++c){var l=s[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(s,c){if(c)e:{var l=r;s=s.split(".");for(var d=0;d<s.length-1;d++){var E=s[d];if(!(E in l))break e;l=l[E]}s=s[s.length-1],d=l[s],c=c(d),c!=d&&c!=null&&e(l,s,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(s){return s||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(s){return s||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(s){return s||function(c){var l=[],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&l.push([d,c[d]]);return l}});var o=o||{},a=this||self;function u(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function h(s,c,l){return s.call.apply(s.bind,arguments)}function f(s,c,l){return f=h,f.apply(null,arguments)}function m(s,c){var l=Array.prototype.slice.call(arguments,1);return function(){var d=l.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function v(s,c){function l(){}l.prototype=c.prototype,s.Z=c.prototype,s.prototype=new l,s.prototype.constructor=s,s.Ob=function(d,E,T){for(var x=Array(arguments.length-2),G=2;G<arguments.length;G++)x[G-2]=arguments[G];return c.prototype[E].apply(d,x)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?s=>s&&AsyncContext.Snapshot.wrap(s):s=>s;function S(s){let c=s.length;if(c>0){let l=Array(c);for(let d=0;d<c;d++)l[d]=s[d];return l}return[]}function V(s,c){for(let d=1;d<arguments.length;d++){let E=arguments[d];var l=typeof E;if(l=l!="object"?l:E?Array.isArray(E)?"array":l:"null",l=="array"||l=="object"&&typeof E.length=="number"){l=s.length||0;let T=E.length||0;s.length=l+T;for(let x=0;x<T;x++)s[l+x]=E[x]}else s.push(E)}}class O{constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function M(s){a.setTimeout(()=>{throw s},0)}function Q(){var s=w;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class Y{constructor(){this.h=this.g=null}add(c,l){let d=Z.get();d.set(c,l),this.h?this.h.next=d:this.g=d,this.h=d}}var Z=new O(()=>new Re,s=>s.reset());class Re{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,ve=!1,w=new Y,g=()=>{let s=Promise.resolve(void 0);Be=()=>{s.then(_)}};function _(){for(var s;s=Q();){try{s.h.call(s.g)}catch(l){M(l)}var c=Z;c.j(s),c.h<100&&(c.h++,s.next=c.g,c.g=s)}ve=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function y(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}y.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let l=()=>{};a.addEventListener("test",l,c),a.removeEventListener("test",l,c)}catch{}return s})();function p(s){return/^[\s\xa0]*$/.test(s)}function Se(s,c){y.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s&&this.init(s,c)}v(Se,y),Se.prototype.init=function(s,c){let l=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget,c||(l=="mouseover"?c=s.fromElement:l=="mouseout"&&(c=s.toElement)),this.relatedTarget=c,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=s.pointerType,this.state=s.state,this.i=s,s.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);let s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var At="closure_listenable_"+(Math.random()*1e6|0),Xf=0;function Zf(s,c,l,d,E){this.listener=s,this.proxy=null,this.src=c,this.type=l,this.capture=!!d,this.ha=E,this.key=++Xf,this.da=this.fa=!1}function ti(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function ni(s,c,l){for(let d in s)c.call(l,s[d],d,s)}function em(s,c){for(let l in s)c.call(void 0,s[l],l,s)}function ll(s){let c={};for(let l in s)c[l]=s[l];return c}let ul="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hl(s,c){let l,d;for(let E=1;E<arguments.length;E++){d=arguments[E];for(l in d)s[l]=d[l];for(let T=0;T<ul.length;T++)l=ul[T],Object.prototype.hasOwnProperty.call(d,l)&&(s[l]=d[l])}}function ri(s){this.src=s,this.g={},this.h=0}ri.prototype.add=function(s,c,l,d,E){let T=s.toString();s=this.g[T],s||(s=this.g[T]=[],this.h++);let x=js(s,c,d,E);return x>-1?(c=s[x],l||(c.fa=!1)):(c=new Zf(c,this.src,T,!!d,E),c.fa=l,s.push(c)),c};function qs(s,c){let l=c.type;if(l in s.g){var d=s.g[l],E=Array.prototype.indexOf.call(d,c,void 0),T;(T=E>=0)&&Array.prototype.splice.call(d,E,1),T&&(ti(c),s.g[l].length==0&&(delete s.g[l],s.h--))}}function js(s,c,l,d){for(let E=0;E<s.length;++E){let T=s[E];if(!T.da&&T.listener==c&&T.capture==!!l&&T.ha==d)return E}return-1}var Gs="closure_lm_"+(Math.random()*1e6|0),zs={};function dl(s,c,l,d,E){if(d&&d.once)return ml(s,c,l,d,E);if(Array.isArray(c)){for(let T=0;T<c.length;T++)dl(s,c[T],l,d,E);return null}return l=Ws(l),s&&s[At]?s.J(c,l,u(d)?!!d.capture:!!d,E):fl(s,c,l,!1,d,E)}function fl(s,c,l,d,E,T){if(!c)throw Error("Invalid event type");let x=u(E)?!!E.capture:!!E,G=Ks(s);if(G||(s[Gs]=G=new ri(s)),l=G.add(c,l,d,x,T),l.proxy)return l;if(d=tm(),l.proxy=d,d.src=s,d.listener=l,s.addEventListener)C||(E=x),E===void 0&&(E=!1),s.addEventListener(c.toString(),d,E);else if(s.attachEvent)s.attachEvent(pl(c.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return l}function tm(){function s(l){return c.call(s.src,s.listener,l)}let c=nm;return s}function ml(s,c,l,d,E){if(Array.isArray(c)){for(let T=0;T<c.length;T++)ml(s,c[T],l,d,E);return null}return l=Ws(l),s&&s[At]?s.K(c,l,u(d)?!!d.capture:!!d,E):fl(s,c,l,!0,d,E)}function gl(s,c,l,d,E){if(Array.isArray(c))for(var T=0;T<c.length;T++)gl(s,c[T],l,d,E);else d=u(d)?!!d.capture:!!d,l=Ws(l),s&&s[At]?(s=s.i,T=String(c).toString(),T in s.g&&(c=s.g[T],l=js(c,l,d,E),l>-1&&(ti(c[l]),Array.prototype.splice.call(c,l,1),c.length==0&&(delete s.g[T],s.h--)))):s&&(s=Ks(s))&&(c=s.g[c.toString()],s=-1,c&&(s=js(c,l,d,E)),(l=s>-1?c[s]:null)&&$s(l))}function $s(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[At])qs(c.i,s);else{var l=s.type,d=s.proxy;c.removeEventListener?c.removeEventListener(l,d,s.capture):c.detachEvent?c.detachEvent(pl(l),d):c.addListener&&c.removeListener&&c.removeListener(d),(l=Ks(c))?(qs(l,s),l.h==0&&(l.src=null,c[Gs]=null)):ti(s)}}}function pl(s){return s in zs?zs[s]:zs[s]="on"+s}function nm(s,c){if(s.da)s=!0;else{c=new Se(c,this);let l=s.listener,d=s.ha||s.src;s.fa&&$s(s),s=l.call(d,c)}return s}function Ks(s){return s=s[Gs],s instanceof ri?s:null}var Hs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ws(s){return typeof s=="function"?s:(s[Hs]||(s[Hs]=function(c){return s.handleEvent(c)}),s[Hs])}function Ee(){b.call(this),this.i=new ri(this),this.M=this,this.G=null}v(Ee,b),Ee.prototype[At]=!0,Ee.prototype.removeEventListener=function(s,c,l,d){gl(this,s,c,l,d)};function Ae(s,c){var l,d=s.G;if(d)for(l=[];d;d=d.G)l.push(d);if(s=s.M,d=c.type||c,typeof c=="string")c=new y(c,s);else if(c instanceof y)c.target=c.target||s;else{var E=c;c=new y(d,s),hl(c,E)}E=!0;let T,x;if(l)for(x=l.length-1;x>=0;x--)T=c.g=l[x],E=ii(T,d,!0,c)&&E;if(T=c.g=s,E=ii(T,d,!0,c)&&E,E=ii(T,d,!1,c)&&E,l)for(x=0;x<l.length;x++)T=c.g=l[x],E=ii(T,d,!1,c)&&E}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var s=this.i;for(let c in s.g){let l=s.g[c];for(let d=0;d<l.length;d++)ti(l[d]);delete s.g[c],s.h--}}this.G=null},Ee.prototype.J=function(s,c,l,d){return this.i.add(String(s),c,!1,l,d)},Ee.prototype.K=function(s,c,l,d){return this.i.add(String(s),c,!0,l,d)};function ii(s,c,l,d){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();let E=!0;for(let T=0;T<c.length;++T){let x=c[T];if(x&&!x.da&&x.capture==l){let G=x.listener,me=x.ha||x.src;x.fa&&qs(s.i,x),E=G.call(me,d)!==!1&&E}}return E&&!d.defaultPrevented}function rm(s,c){if(typeof s!="function")if(s&&typeof s.handleEvent=="function")s=f(s.handleEvent,s);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(s,c||0)}function _l(s){s.g=rm(()=>{s.g=null,s.i&&(s.i=!1,_l(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class im extends b{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:_l(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(s){b.call(this),this.h=s,this.g={}}v(nr,b);var yl=[];function vl(s){ni(s.g,function(c,l){this.g.hasOwnProperty(l)&&$s(c)},s),s.g={}}nr.prototype.N=function(){nr.Z.N.call(this),vl(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=a.JSON.stringify,sm=a.JSON.parse,om=class{stringify(s){return a.JSON.stringify(s,void 0)}parse(s){return a.JSON.parse(s,void 0)}};function wl(){}function bl(){}var rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Js(){y.call(this,"d")}v(Js,y);function Ys(){y.call(this,"c")}v(Ys,y);var zt={},El=null;function si(){return El=El||new Ee}zt.Ia="serverreachability";function Il(s){y.call(this,zt.Ia,s)}v(Il,y);function ir(s){let c=si();Ae(c,new Il(c))}zt.STAT_EVENT="statevent";function Cl(s,c){y.call(this,zt.STAT_EVENT,s),this.stat=c}v(Cl,y);function Pe(s){let c=si();Ae(c,new Cl(c,s))}zt.Ja="timingevent";function Tl(s,c){y.call(this,zt.Ja,s),this.size=c}v(Tl,y);function sr(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){s()},c)}function or(){this.g=!0}or.prototype.ua=function(){this.g=!1};function am(s,c,l,d,E,T){s.info(function(){if(s.g)if(T){var x="",G=T.split("&");for(let X=0;X<G.length;X++){var me=G[X].split("=");if(me.length>1){let ge=me[0];me=me[1];let We=ge.split("_");x=We.length>=2&&We[1]=="type"?x+(ge+"="+me+"&"):x+(ge+"=redacted&")}}}else x=null;else x=T;return"XMLHTTP REQ ("+d+") [attempt "+E+"]: "+c+`
`+l+`
`+x})}function cm(s,c,l,d,E,T,x){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+E+"]: "+c+`
`+l+`
`+T+" "+x})}function mn(s,c,l,d){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+um(s,l)+(d?" "+d:"")})}function lm(s,c){s.info(function(){return"TIMEOUT: "+c})}or.prototype.info=function(){};function um(s,c){if(!s.g)return c;if(!c)return null;try{let T=JSON.parse(c);if(T){for(s=0;s<T.length;s++)if(Array.isArray(T[s])){var l=T[s];if(!(l.length<2)){var d=l[1];if(Array.isArray(d)&&!(d.length<1)){var E=d[0];if(E!="noop"&&E!="stop"&&E!="close")for(let x=1;x<d.length;x++)d[x]=""}}}}return Qs(T)}catch{return c}}var oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pl;function Xs(){}v(Xs,wl),Xs.prototype.g=function(){return new XMLHttpRequest},Pl=new Xs;function ar(s){return encodeURIComponent(String(s))}function hm(s){var c=1;s=s.split(":");let l=[];for(;c>0&&s.length;)l.push(s.shift()),c--;return s.length&&l.push(s.join(":")),l}function Pt(s,c,l,d){this.j=s,this.i=c,this.l=l,this.S=d||1,this.V=new nr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sl}function Sl(){this.i=null,this.g="",this.h=!1}var xl={},Zs={};function eo(s,c,l){s.M=1,s.A=ci(He(c)),s.u=l,s.R=!0,Vl(s,null)}function Vl(s,c){s.F=Date.now(),ai(s),s.B=He(s.A);var l=s.B,d=s.S;Array.isArray(d)||(d=[String(d)]),Gl(l.i,"t",d),s.C=0,l=s.j.L,s.h=new Sl,s.g=au(s.j,l?c:null,!s.u),s.P>0&&(s.O=new im(f(s.Y,s,s.g),s.P)),c=s.V,l=s.g,d=s.ba;var E="readystatechange";Array.isArray(E)||(E&&(yl[0]=E.toString()),E=yl);for(let T=0;T<E.length;T++){let x=dl(l,E[T],d||c.handleEvent,!1,c.h||c);if(!x)break;c.g[x.key]=x}c=s.J?ll(s.J):{},s.u?(s.v||(s.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.B,s.v,s.u,c)):(s.v="GET",s.g.ea(s.B,s.v,null,c)),ir(),am(s.i,s.v,s.B,s.l,s.S,s.u)}Pt.prototype.ba=function(s){s=s.target;let c=this.O;c&&Vt(s)==3?c.j():this.Y(s)},Pt.prototype.Y=function(s){try{if(s==this.g)e:{let G=Vt(this.g),me=this.g.ya(),X=this.g.ca();if(!(G<3)&&(G!=3||this.g&&(this.h.h||this.g.la()||Jl(this.g)))){this.K||G!=4||me==7||(me==8||X<=0?ir(3):ir(2)),to(this);var c=this.g.ca();this.X=c;var l=dm(this);if(this.o=c==200,cm(this.i,this.v,this.B,this.l,this.S,G,c),this.o){if(this.U&&!this.L){t:{if(this.g){var d,E=this.g;if((d=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(d)){var T=d;break t}}T=null}if(s=T)mn(this.i,this.l,s,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,no(this,s);else{this.o=!1,this.m=3,Pe(12),$t(this),cr(this);break e}}if(this.R){s=!0;let ge;for(;!this.K&&this.C<l.length;)if(ge=fm(this,l),ge==Zs){G==4&&(this.m=4,Pe(14),s=!1),mn(this.i,this.l,null,"[Incomplete Response]");break}else if(ge==xl){this.m=4,Pe(15),mn(this.i,this.l,l,"[Invalid Chunk]"),s=!1;break}else mn(this.i,this.l,ge,null),no(this,ge);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||l.length!=0||this.h.h||(this.m=1,Pe(16),s=!1),this.o=this.o&&s,!s)mn(this.i,this.l,l,"[Invalid Chunked Response]"),$t(this),cr(this);else if(l.length>0&&!this.W){this.W=!0;var x=this.j;x.g==this&&x.aa&&!x.P&&(x.j.info("Great, no buffering proxy detected. Bytes received: "+l.length),lo(x),x.P=!0,Pe(11))}}else mn(this.i,this.l,l,null),no(this,l);G==4&&$t(this),this.o&&!this.K&&(G==4?ru(this.j,this):(this.o=!1,ai(this)))}else Pm(this.g),c==400&&l.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),$t(this),cr(this)}}}catch{}};function dm(s){if(!Dl(s))return s.g.la();let c=Jl(s.g);if(c==="")return"";let l="",d=c.length,E=Vt(s.g)==4;if(!s.h.i){if(typeof TextDecoder>"u")return $t(s),cr(s),"";s.h.i=new a.TextDecoder}for(let T=0;T<d;T++)s.h.h=!0,l+=s.h.i.decode(c[T],{stream:!(E&&T==d-1)});return c.length=0,s.h.g+=l,s.C=0,s.h.g}function Dl(s){return s.g?s.v=="GET"&&s.M!=2&&s.j.Aa:!1}function fm(s,c){var l=s.C,d=c.indexOf(`
`,l);return d==-1?Zs:(l=Number(c.substring(l,d)),isNaN(l)?xl:(d+=1,d+l>c.length?Zs:(c=c.slice(d,d+l),s.C=d+l,c)))}Pt.prototype.cancel=function(){this.K=!0,$t(this)};function ai(s){s.T=Date.now()+s.H,Ml(s,s.H)}function Ml(s,c){if(s.D!=null)throw Error("WatchDog timer not null");s.D=sr(f(s.aa,s),c)}function to(s){s.D&&(a.clearTimeout(s.D),s.D=null)}Pt.prototype.aa=function(){this.D=null;let s=Date.now();s-this.T>=0?(lm(this.i,this.B),this.M!=2&&(ir(),Pe(17)),$t(this),this.m=2,cr(this)):Ml(this,this.T-s)};function cr(s){s.j.I==0||s.K||ru(s.j,s)}function $t(s){to(s);var c=s.O;c&&typeof c.dispose=="function"&&c.dispose(),s.O=null,vl(s.V),s.g&&(c=s.g,s.g=null,c.abort(),c.dispose())}function no(s,c){try{var l=s.j;if(l.I!=0&&(l.g==s||ro(l.h,s))){if(!s.L&&ro(l.h,s)&&l.I==3){try{var d=l.Ba.g.parse(c)}catch{d=null}if(Array.isArray(d)&&d.length==3){var E=d;if(E[0]==0){e:if(!l.v){if(l.g)if(l.g.F+3e3<s.F)mi(l),di(l);else break e;co(l),Pe(18)}}else l.xa=E[1],0<l.xa-l.K&&E[2]<37500&&l.F&&l.A==0&&!l.C&&(l.C=sr(f(l.Va,l),6e3));kl(l.h)<=1&&l.ta&&(l.ta=void 0)}else Ht(l,11)}else if((s.L||l.g==s)&&mi(l),!p(c))for(E=l.Ba.g.parse(c),c=0;c<E.length;c++){let X=E[c],ge=X[0];if(!(ge<=l.K))if(l.K=ge,X=X[1],l.I==2)if(X[0]=="c"){l.M=X[1],l.ba=X[2];let We=X[3];We!=null&&(l.ka=We,l.j.info("VER="+l.ka));let Wt=X[4];Wt!=null&&(l.za=Wt,l.j.info("SVER="+l.za));let Dt=X[5];Dt!=null&&typeof Dt=="number"&&Dt>0&&(d=1.5*Dt,l.O=d,l.j.info("backChannelRequestTimeoutMs_="+d)),d=l;let Mt=s.g;if(Mt){let pi=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var T=d.h;T.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(T.j=T.l,T.g=new Set,T.h&&(io(T,T.h),T.h=null))}if(d.G){let uo=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(d.wa=uo,ee(d.J,d.G,uo))}}l.I=3,l.l&&l.l.ra(),l.aa&&(l.T=Date.now()-s.F,l.j.info("Handshake RTT: "+l.T+"ms")),d=l;var x=s;if(d.na=ou(d,d.L?d.ba:null,d.W),x.L){Nl(d.h,x);var G=x,me=d.O;me&&(G.H=me),G.D&&(to(G),ai(G)),d.g=x}else tu(d);l.i.length>0&&fi(l)}else X[0]!="stop"&&X[0]!="close"||Ht(l,7);else l.I==3&&(X[0]=="stop"||X[0]=="close"?X[0]=="stop"?Ht(l,7):ao(l):X[0]!="noop"&&l.l&&l.l.qa(X),l.A=0)}}ir(4)}catch{}}var mm=class{constructor(s,c){this.g=s,this.map=c}};function Rl(s){this.l=s||10,a.PerformanceNavigationTiming?(s=a.performance.getEntriesByType("navigation"),s=s.length>0&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ol(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function kl(s){return s.h?1:s.g?s.g.size:0}function ro(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function io(s,c){s.g?s.g.add(c):s.h=c}function Nl(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}Rl.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function Fl(s){if(s.h!=null)return s.i.concat(s.h.G);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let l of s.g.values())c=c.concat(l.G);return c}return S(s.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gm(s,c){if(s){s=s.split("&");for(let l=0;l<s.length;l++){let d=s[l].indexOf("="),E,T=null;d>=0?(E=s[l].substring(0,d),T=s[l].substring(d+1)):E=s[l],c(E,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function St(s){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;s instanceof St?(this.l=s.l,lr(this,s.j),this.o=s.o,this.g=s.g,ur(this,s.u),this.h=s.h,so(this,zl(s.i)),this.m=s.m):s&&(c=String(s).match(Ll))?(this.l=!1,lr(this,c[1]||"",!0),this.o=hr(c[2]||""),this.g=hr(c[3]||"",!0),ur(this,c[4]),this.h=hr(c[5]||"",!0),so(this,c[6]||"",!0),this.m=hr(c[7]||"")):(this.l=!1,this.i=new fr(null,this.l))}St.prototype.toString=function(){let s=[];var c=this.j;c&&s.push(dr(c,Bl,!0),":");var l=this.g;return(l||c=="file")&&(s.push("//"),(c=this.o)&&s.push(dr(c,Bl,!0),"@"),s.push(ar(l).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.u,l!=null&&s.push(":",String(l))),(l=this.h)&&(this.g&&l.charAt(0)!="/"&&s.push("/"),s.push(dr(l,l.charAt(0)=="/"?ym:_m,!0))),(l=this.i.toString())&&s.push("?",l),(l=this.m)&&s.push("#",dr(l,wm)),s.join("")},St.prototype.resolve=function(s){let c=He(this),l=!!s.j;l?lr(c,s.j):l=!!s.o,l?c.o=s.o:l=!!s.g,l?c.g=s.g:l=s.u!=null;var d=s.h;if(l)ur(c,s.u);else if(l=!!s.h){if(d.charAt(0)!="/")if(this.g&&!this.h)d="/"+d;else{var E=c.h.lastIndexOf("/");E!=-1&&(d=c.h.slice(0,E+1)+d)}if(E=d,E==".."||E==".")d="";else if(E.indexOf("./")!=-1||E.indexOf("/.")!=-1){d=E.lastIndexOf("/",0)==0,E=E.split("/");let T=[];for(let x=0;x<E.length;){let G=E[x++];G=="."?d&&x==E.length&&T.push(""):G==".."?((T.length>1||T.length==1&&T[0]!="")&&T.pop(),d&&x==E.length&&T.push("")):(T.push(G),d=!0)}d=T.join("/")}else d=E}return l?c.h=d:l=s.i.toString()!=="",l?so(c,zl(s.i)):l=!!s.m,l&&(c.m=s.m),c};function He(s){return new St(s)}function lr(s,c,l){s.j=l?hr(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function ur(s,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);s.u=c}else s.u=null}function so(s,c,l){c instanceof fr?(s.i=c,bm(s.i,s.l)):(l||(c=dr(c,vm)),s.i=new fr(c,s.l))}function ee(s,c,l){s.i.set(c,l)}function ci(s){return ee(s,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),s}function hr(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function dr(s,c,l){return typeof s=="string"?(s=encodeURI(s).replace(c,pm),l&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function pm(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Bl=/[#\/\?@]/g,_m=/[#\?:]/g,ym=/[#\?]/g,vm=/[#\?@]/g,wm=/#/g;function fr(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function Kt(s){s.g||(s.g=new Map,s.h=0,s.i&&gm(s.i,function(c,l){s.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}n=fr.prototype,n.add=function(s,c){Kt(this),this.i=null,s=gn(this,s);let l=this.g.get(s);return l||this.g.set(s,l=[]),l.push(c),this.h+=1,this};function Ul(s,c){Kt(s),c=gn(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function ql(s,c){return Kt(s),c=gn(s,c),s.g.has(c)}n.forEach=function(s,c){Kt(this),this.g.forEach(function(l,d){l.forEach(function(E){s.call(c,E,d,this)},this)},this)};function jl(s,c){Kt(s);let l=[];if(typeof c=="string")ql(s,c)&&(l=l.concat(s.g.get(gn(s,c))));else for(s=Array.from(s.g.values()),c=0;c<s.length;c++)l=l.concat(s[c]);return l}n.set=function(s,c){return Kt(this),this.i=null,s=gn(this,s),ql(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=jl(this,s),s.length>0?String(s[0]):c):c};function Gl(s,c,l){Ul(s,c),l.length>0&&(s.i=null,s.g.set(gn(s,c),S(l)),s.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(let d=0;d<c.length;d++){var l=c[d];let E=ar(l);l=jl(this,l);for(let T=0;T<l.length;T++){let x=E;l[T]!==""&&(x+="="+ar(l[T])),s.push(x)}}return this.i=s.join("&")};function zl(s){let c=new fr;return c.i=s.i,s.g&&(c.g=new Map(s.g),c.h=s.h),c}function gn(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function bm(s,c){c&&!s.j&&(Kt(s),s.i=null,s.g.forEach(function(l,d){let E=d.toLowerCase();d!=E&&(Ul(this,d),Gl(this,E,l))},s)),s.j=c}function Em(s,c){let l=new or;if(a.Image){let d=new Image;d.onload=m(xt,l,"TestLoadImage: loaded",!0,c,d),d.onerror=m(xt,l,"TestLoadImage: error",!1,c,d),d.onabort=m(xt,l,"TestLoadImage: abort",!1,c,d),d.ontimeout=m(xt,l,"TestLoadImage: timeout",!1,c,d),a.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else c(!1)}function Im(s,c){let l=new or,d=new AbortController,E=setTimeout(()=>{d.abort(),xt(l,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:d.signal}).then(T=>{clearTimeout(E),T.ok?xt(l,"TestPingServer: ok",!0,c):xt(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(E),xt(l,"TestPingServer: error",!1,c)})}function xt(s,c,l,d,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),d(l)}catch{}}function Cm(){this.g=new om}function li(s){this.i=s.Sb||null,this.h=s.ab||!1}v(li,wl),li.prototype.g=function(){return new ui(this.i,this.h)};function ui(s,c){Ee.call(this),this.H=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ui,Ee),n=ui.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=s,this.D=c,this.readyState=1,gr(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};s&&(c.body=s),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},n.Pa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$l(this)}else s.text().then(this.Oa.bind(this),this.ga.bind(this))};function $l(s){s.j.read().then(s.Ma.bind(s)).catch(s.ga.bind(s))}n.Ma=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?mr(this):gr(this),this.readyState==3&&$l(this)}},n.Oa=function(s){this.g&&(this.response=this.responseText=s,mr(this))},n.Na=function(s){this.g&&(this.response=s,mr(this))},n.ga=function(){this.g&&mr(this)};function mr(s){s.readyState=4,s.l=null,s.j=null,s.B=null,gr(s)}n.setRequestHeader=function(s,c){this.A.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,s.push(l[0]+": "+l[1]),l=c.next();return s.join(`\r
`)};function gr(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Kl(s){let c="";return ni(s,function(l,d){c+=d,c+=":",c+=l,c+=`\r
`}),c}function oo(s,c,l){e:{for(d in l){var d=!1;break e}d=!0}d||(l=Kl(l),typeof s=="string"?l!=null&&ar(l):ee(s,c,l))}function se(s){Ee.call(this),this.headers=new Map,this.L=s||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(se,Ee);var Tm=/^https?$/i,Am=["POST","PUT"];n=se.prototype,n.Fa=function(s){this.H=s},n.ea=function(s,c,l,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pl.g(),this.g.onreadystatechange=I(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(T){Hl(this,T);return}if(s=l||"",l=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var E in d)l.set(E,d[E]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let T of d.keys())l.set(T,d.get(T));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(l.keys()).find(T=>T.toLowerCase()=="content-type"),E=a.FormData&&s instanceof a.FormData,!(Array.prototype.indexOf.call(Am,c,void 0)>=0)||d||E||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[T,x]of l)this.g.setRequestHeader(T,x);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(s),this.v=!1}catch(T){Hl(this,T)}};function Hl(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.o=5,Wl(s),hi(s)}function Wl(s){s.A||(s.A=!0,Ae(s,"complete"),Ae(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=s||7,Ae(this,"complete"),Ae(this,"abort"),hi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hi(this,!0)),se.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ql(this):this.Xa())},n.Xa=function(){Ql(this)};function Ql(s){if(s.h&&typeof o<"u"){if(s.v&&Vt(s)==4)setTimeout(s.Ca.bind(s),0);else if(Ae(s,"readystatechange"),Vt(s)==4){s.h=!1;try{let T=s.ca();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var d;if(d=T===0){let x=String(s.D).match(Ll)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),d=!Tm.test(x?x.toLowerCase():"")}l=d}if(l)Ae(s,"complete"),Ae(s,"success");else{s.o=6;try{var E=Vt(s)>2?s.g.statusText:""}catch{E=""}s.l=E+" ["+s.ca()+"]",Wl(s)}}finally{hi(s)}}}}function hi(s,c){if(s.g){s.m&&(clearTimeout(s.m),s.m=null);let l=s.g;s.g=null,c||Ae(s,"ready");try{l.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vt(s){return s.g?s.g.readyState:0}n.ca=function(){try{return Vt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),sm(c)}};function Jl(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.F){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Pm(s){let c={};s=(s.g&&Vt(s)>=2&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<s.length;d++){if(p(s[d]))continue;var l=hm(s[d]);let E=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let T=c[E]||[];c[E]=T,T.push(l)}em(c,function(d){return d.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(s,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[s]||c}function Yl(s){this.za=0,this.i=[],this.j=new or,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pr("failFast",!1,s),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pr("baseRetryDelayMs",5e3,s),this.Za=pr("retryDelaySeedMs",1e4,s),this.Ta=pr("forwardChannelMaxRetries",2,s),this.va=pr("forwardChannelRequestTimeoutMs",2e4,s),this.ma=s&&s.xmlHttpFactory||void 0,this.Ua=s&&s.Rb||void 0,this.Aa=s&&s.useFetchStreams||!1,this.O=void 0,this.L=s&&s.supportsCrossDomainXhr||!1,this.M="",this.h=new Rl(s&&s.concurrentRequestLimit),this.Ba=new Cm,this.S=s&&s.fastHandshake||!1,this.R=s&&s.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=s&&s.Pb||!1,s&&s.ua&&this.j.ua(),s&&s.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&s&&s.detectBufferingProxy||!1,this.ia=void 0,s&&s.longPollingTimeout&&s.longPollingTimeout>0&&(this.ia=s.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Yl.prototype,n.ka=8,n.I=1,n.connect=function(s,c,l,d){Pe(0),this.W=s,this.H=c||{},l&&d!==void 0&&(this.H.OSID=l,this.H.OAID=d),this.F=this.X,this.J=ou(this,null,this.W),fi(this)};function ao(s){if(Xl(s),s.I==3){var c=s.V++,l=He(s.J);if(ee(l,"SID",s.M),ee(l,"RID",c),ee(l,"TYPE","terminate"),_r(s,l),c=new Pt(s,s.j,c),c.M=2,c.A=ci(He(l)),l=!1,a.navigator&&a.navigator.sendBeacon)try{l=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!l&&a.Image&&(new Image().src=c.A,l=!0),l||(c.g=au(c.j,null),c.g.ea(c.A)),c.F=Date.now(),ai(c)}su(s)}function di(s){s.g&&(lo(s),s.g.cancel(),s.g=null)}function Xl(s){di(s),s.v&&(a.clearTimeout(s.v),s.v=null),mi(s),s.h.cancel(),s.m&&(typeof s.m=="number"&&a.clearTimeout(s.m),s.m=null)}function fi(s){if(!Ol(s.h)&&!s.m){s.m=!0;var c=s.Ea;Be||g(),ve||(Be(),ve=!0),w.add(c,s),s.D=0}}function Sm(s,c){return kl(s.h)>=s.h.j-(s.m?1:0)?!1:s.m?(s.i=c.G.concat(s.i),!0):s.I==1||s.I==2||s.D>=(s.Sa?0:s.Ta)?!1:(s.m=sr(f(s.Ea,s,c),iu(s,s.D)),s.D++,!0)}n.Ea=function(s){if(this.m)if(this.m=null,this.I==1){if(!s){this.V=Math.floor(Math.random()*1e5),s=this.V++;let E=new Pt(this,this.j,s),T=this.o;if(this.U&&(T?(T=ll(T),hl(T,this.U)):T=this.U),this.u!==null||this.R||(E.J=T,T=null),this.S)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var d=this.i[l];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(c+=d,c>4096){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=eu(this,E,c),l=He(this.J),ee(l,"RID",s),ee(l,"CVER",22),this.G&&ee(l,"X-HTTP-Session-Id",this.G),_r(this,l),T&&(this.R?c="headers="+ar(Kl(T))+"&"+c:this.u&&oo(l,this.u,T)),io(this.h,E),this.Ra&&ee(l,"TYPE","init"),this.S?(ee(l,"$req",c),ee(l,"SID","null"),E.U=!0,eo(E,l,null)):eo(E,l,c),this.I=2}}else this.I==3&&(s?Zl(this,s):this.i.length==0||Ol(this.h)||Zl(this))};function Zl(s,c){var l;c?l=c.l:l=s.V++;let d=He(s.J);ee(d,"SID",s.M),ee(d,"RID",l),ee(d,"AID",s.K),_r(s,d),s.u&&s.o&&oo(d,s.u,s.o),l=new Pt(s,s.j,l,s.D+1),s.u===null&&(l.J=s.o),c&&(s.i=c.G.concat(s.i)),c=eu(s,l,1e3),l.H=Math.round(s.va*.5)+Math.round(s.va*.5*Math.random()),io(s.h,l),eo(l,d,c)}function _r(s,c){s.H&&ni(s.H,function(l,d){ee(c,d,l)}),s.l&&ni({},function(l,d){ee(c,d,l)})}function eu(s,c,l){l=Math.min(s.i.length,l);let d=s.l?f(s.l.Ka,s.l,s):null;e:{var E=s.i;let G=-1;for(;;){let me=["count="+l];G==-1?l>0?(G=E[0].g,me.push("ofs="+G)):G=0:me.push("ofs="+G);let X=!0;for(let ge=0;ge<l;ge++){var T=E[ge].g;let We=E[ge].map;if(T-=G,T<0)G=Math.max(0,E[ge].g-100),X=!1;else try{T="req"+T+"_"||"";try{var x=We instanceof Map?We:Object.entries(We);for(let[Wt,Dt]of x){let Mt=Dt;u(Dt)&&(Mt=Qs(Dt)),me.push(T+Wt+"="+encodeURIComponent(Mt))}}catch(Wt){throw me.push(T+"type="+encodeURIComponent("_badmap")),Wt}}catch{d&&d(We)}}if(X){x=me.join("&");break e}}x=void 0}return s=s.i.splice(0,l),c.G=s,x}function tu(s){if(!s.g&&!s.v){s.Y=1;var c=s.Da;Be||g(),ve||(Be(),ve=!0),w.add(c,s),s.A=0}}function co(s){return s.g||s.v||s.A>=3?!1:(s.Y++,s.v=sr(f(s.Da,s),iu(s,s.A)),s.A++,!0)}n.Da=function(){if(this.v=null,nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var s=4*this.T;this.j.info("BP detection timer enabled: "+s),this.B=sr(f(this.Wa,this),s)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),di(this),nu(this))};function lo(s){s.B!=null&&(a.clearTimeout(s.B),s.B=null)}function nu(s){s.g=new Pt(s,s.j,"rpc",s.Y),s.u===null&&(s.g.J=s.o),s.g.P=0;var c=He(s.na);ee(c,"RID","rpc"),ee(c,"SID",s.M),ee(c,"AID",s.K),ee(c,"CI",s.F?"0":"1"),!s.F&&s.ia&&ee(c,"TO",s.ia),ee(c,"TYPE","xmlhttp"),_r(s,c),s.u&&s.o&&oo(c,s.u,s.o),s.O&&(s.g.H=s.O);var l=s.g;s=s.ba,l.M=1,l.A=ci(He(c)),l.u=null,l.R=!0,Vl(l,s)}n.Va=function(){this.C!=null&&(this.C=null,di(this),co(this),Pe(19))};function mi(s){s.C!=null&&(a.clearTimeout(s.C),s.C=null)}function ru(s,c){var l=null;if(s.g==c){mi(s),lo(s),s.g=null;var d=2}else if(ro(s.h,c))l=c.G,Nl(s.h,c),d=1;else return;if(s.I!=0){if(c.o)if(d==1){l=c.u?c.u.length:0,c=Date.now()-c.F;var E=s.D;d=si(),Ae(d,new Tl(d,l)),fi(s)}else tu(s);else if(E=c.m,E==3||E==0&&c.X>0||!(d==1&&Sm(s,c)||d==2&&co(s)))switch(l&&l.length>0&&(c=s.h,c.i=c.i.concat(l)),E){case 1:Ht(s,5);break;case 4:Ht(s,10);break;case 3:Ht(s,6);break;default:Ht(s,2)}}}function iu(s,c){let l=s.Qa+Math.floor(Math.random()*s.Za);return s.isActive()||(l*=2),l*c}function Ht(s,c){if(s.j.info("Error code "+c),c==2){var l=f(s.bb,s),d=s.Ua;let E=!d;d=new St(d||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lr(d,"https"),ci(d),E?Em(d.toString(),l):Im(d.toString(),l)}else Pe(2);s.I=0,s.l&&s.l.pa(c),su(s),Xl(s)}n.bb=function(s){s?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function su(s){if(s.I=0,s.ja=[],s.l){let c=Fl(s.h);(c.length!=0||s.i.length!=0)&&(V(s.ja,c),V(s.ja,s.i),s.h.i.length=0,S(s.i),s.i.length=0),s.l.oa()}}function ou(s,c,l){var d=l instanceof St?He(l):new St(l);if(d.g!="")c&&(d.g=c+"."+d.g),ur(d,d.u);else{var E=a.location;d=E.protocol,c=c?c+"."+E.hostname:E.hostname,E=+E.port;let T=new St(null);d&&lr(T,d),c&&(T.g=c),E&&ur(T,E),l&&(T.h=l),d=T}return l=s.G,c=s.wa,l&&c&&ee(d,l,c),ee(d,"VER",s.ka),_r(s,d),d}function au(s,c,l){if(c&&!s.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Aa&&!s.ma?new se(new li({ab:l})):new se(s.ma),c.Fa(s.L),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}n=cu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function gi(){}gi.prototype.g=function(s,c){return new Oe(s,c)};function Oe(s,c){Ee.call(this),this.g=new Yl(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(s?s["X-WebChannel-Client-Profile"]=c.sa:s={"X-WebChannel-Client-Profile":c.sa}),this.g.U=s,(s=c&&c.Qb)&&!p(s)&&(this.g.u=s),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!p(c)&&(this.g.G=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new pn(this)}v(Oe,Ee),Oe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Oe.prototype.close=function(){ao(this.g)},Oe.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var l={};l.__data__=s,s=l}else this.v&&(l={},l.__data__=Qs(s),s=l);c.i.push(new mm(c.Ya++,s)),c.I==3&&fi(c)},Oe.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,Oe.Z.N.call(this)};function lu(s){Js.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let l in c){s=l;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}v(lu,Js);function uu(){Ys.call(this),this.status=1}v(uu,Ys);function pn(s){this.g=s}v(pn,cu),pn.prototype.ra=function(){Ae(this.g,"a")},pn.prototype.qa=function(s){Ae(this.g,new lu(s))},pn.prototype.pa=function(s){Ae(this.g,new uu)},pn.prototype.oa=function(){Ae(this.g,"b")},gi.prototype.createWebChannel=gi.prototype.g,Oe.prototype.send=Oe.prototype.o,Oe.prototype.open=Oe.prototype.m,Oe.prototype.close=Oe.prototype.close,Ho=_t.createWebChannelTransport=function(){return new gi},Ko=_t.getStatEventTarget=function(){return si()},$o=_t.Event=zt,Ai=_t.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oi.NO_ERROR=0,oi.TIMEOUT=8,oi.HTTP_ERROR=6,Sr=_t.ErrorCode=oi,Al.COMPLETE="complete",zo=_t.EventType=Al,bl.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,bn=_t.WebChannel=bl,Kg=_t.FetchXmlHttpFactory=li,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,Go=_t.XhrIo=se}).apply(typeof Ti<"u"?Ti:typeof self<"u"?self:typeof window<"u"?window:{});var pe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");var Gn="12.8.0";function Bh(n){Gn=n}var tn=new wn("@firebase/firestore");function En(){return tn.logLevel}function D(n,...e){if(tn.logLevel<=H.DEBUG){let t=e.map(Tc);tn.debug(`Firestore (${Gn}): ${n}`,...t)}}function wt(n,...e){if(tn.logLevel<=H.ERROR){let t=e.map(Tc);tn.error(`Firestore (${Gn}): ${n}`,...t)}}function Ft(n,...e){if(tn.logLevel<=H.WARN){let t=e.map(Tc);tn.warn(`Firestore (${Gn}): ${n}`,...t)}}function Tc(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function B(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Uh(n,r,t)}function Uh(n,e,t){let r=`FIRESTORE (${Gn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw wt(r),new Error(r)}function J(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Uh(e,i,r)}function q(n,e){return n}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends ft{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ze=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ri=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Oi=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pe.UNAUTHENTICATED))}shutdown(){}},Zo=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ki=class{constructor(e){this.t=e,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){J(this.o===void 0,42304);let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),o=new Ze;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ze,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?u(h):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ze)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string",31837,{l:r}),new Ri(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string",2055,{h:e}),new pe(e)}},ea=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},ta=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ea(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ni=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fi=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){J(this.o===void 0,3512);let r=o=>{o.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,D("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ni(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ni(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Hg(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var nn=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Hg(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function K(n,e){return n<e?-1:n>e?1:0}function na(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Wo(i)===Wo(o)?K(i,o):Wo(i)?1:-1}return K(n.length,e.length)}var Wg=55296,Qg=57343;function Wo(n){let e=n.charCodeAt(0);return e>=Wg&&e<=Qg}function xn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var eh="__name__",Li=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&B(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return K(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):na(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pt.fromString(e.substring(4,e.length-2))}},ie=class n extends Li{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new R(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Jg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Me=class n extends Li{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Jg.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eh}static keyField(){return new n([eh])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new R(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new R(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new R(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new R(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var F=class n{constructor(e){this.path=e}static fromPath(e){return new n(ie.fromString(e))}static fromName(e){return new n(ie.fromString(e).popFirst(5))}static empty(){return new n(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ie(e.slice()))}};function qh(n,e,t){if(!t)throw new R(A.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jh(n,e,t,r){if(e===!0&&r===!0)throw new R(A.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function th(n){if(!F.isDocumentKey(n))throw new R(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nh(n){if(F.isDocumentKey(n))throw new R(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gh(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gs(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B(12329,{type:typeof n})}function ct(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new R(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gs(n);throw new R(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function le(n,e){let t={typeString:n};return e&&(t.value=e),t}function zn(n,e){if(!Gh(n))throw new R(A.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new R(A.INVALID_ARGUMENT,t);return!0}var rh=-62135596800,ih=1e6,ue=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ih);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new R(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new R(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rh)throw new R(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ih}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zn(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ue._jsonSchemaVersion="firestore/timestamp/1.0",ue._jsonSchema={type:le("string",ue._jsonSchemaVersion),seconds:le("number"),nanoseconds:le("number")};var j=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ue(0,0))}static max(){return new n(new ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Or=-1,Bi=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Bi.UNKNOWN_ID=-1;function Yg(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new ue(t+1,0):new ue(t,r));return new rn(i,F.empty(),e)}function Xg(n){return new rn(n.readTime,n.key,Or)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(j.min(),F.empty(),Or)}static max(){return new n(j.max(),F.empty(),Or)}};function Zg(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=F.comparator(n.documentKey,e.documentKey),t!==0?t:K(n.largestBatchId,e.largestBatchId))}var ep="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ra=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function $n(n){if(n.code!==A.FAILED_PRECONDITION||n.message!==ep)throw n;D("LocalStore","Unexpectedly lost primary lease")}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},h=>r(h))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let h=0;h<o;h++){let f=h;t(e[f]).next(m=>{a[f]=m,++u,u===o&&r(a)},m=>i(m))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function tp(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kn(n){return n.name==="IndexedDbTransactionError"}var Ac=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Pc=-1;function ps(n){return n==null}function kr(n){return n===0&&1/n==-1/0}function np(n){return typeof n=="number"&&Number.isInteger(n)&&!kr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var zh="";function rp(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sh(e)),e=ip(n.get(t),e);return sh(e)}function ip(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case zh:t+="";break;default:t+=o}}return t}function sh(n){return n+zh+""}var sp="remoteDocuments",$h="owner";var Kh="mutationQueues";var Hh="mutations";var Wh="documentMutations",op="remoteDocumentsV14";var Qh="remoteDocumentGlobal";var Jh="targets";var Yh="targetDocuments";var Xh="targetGlobal",Zh="collectionParents";var ed="clientMetadata";var td="bundles";var nd="namedQueries";var ap="indexConfiguration";var cp="indexState";var lp="indexEntries";var rd="documentOverlays";var up="globals";var hp=[Kh,Hh,Wh,sp,Jh,$h,Xh,Yh,ed,Qh,Zh,td,nd],Kv=[...hp,rd],dp=[Kh,Hh,Wh,op,Jh,$h,Xh,Yh,ed,Qh,Zh,td,nd,rd],fp=dp,mp=[...fp,ap,cp,lp];var Hv=[...mp,up];function oh(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qt(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function id(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var oe=class n{constructor(e,t){this.comparator=e,this.root=t||et.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new An(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new An(this.root,e,this.comparator,!1)}getReverseIterator(){return new An(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new An(this.root,e,this.comparator,!0)}},An=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},et=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new et(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _e=class n{constructor(e){this.comparator=e,this.data=new oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ui(this.data.getIterator())}getIteratorFrom(e){return new Ui(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ui=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Le=class n{constructor(e){this.fields=e,e.sort(Me.comparator)}static empty(){return new n([])}unionWith(e){let t=new _e(Me.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xn(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var qi=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var be=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qi("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};be.EMPTY_BYTE_STRING=new be("");var gp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bt(n){if(J(!!n,39018),typeof n=="string"){let e=0,t=gp.exec(n);if(J(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:re(n.seconds),nanos:re(n.nanos)}}function re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Et(n){return typeof n=="string"?be.fromBase64String(n):be.fromUint8Array(n)}var sd="server_timestamp",od="__type__",ad="__previous_value__",cd="__local_write_time__";function _s(n){return(n?.mapValue?.fields||{})[od]?.stringValue===sd}function ys(n){let e=n.mapValue.fields[ad];return _s(e)?ys(e):e}function Nr(n){let e=bt(n.mapValue.fields[cd].timestampValue);return new ue(e.seconds,e.nanos)}var ia=class{constructor(e,t,r,i,o,a,u,h,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m,this.apiKey=v}},ji="(default)",Fr=class n{constructor(e,t){this.projectId=e,this.database=t||ji}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ji}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function ld(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new R(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fr(n.options.projectId,e)}var Sc="__type__",ud="__max__",Pi={mapValue:{fields:{__type__:{stringValue:ud}}}},xc="__vector__",Vn="value";function Lt(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_s(n)?4:dd(n)?9007199254740991:hd(n)?10:11:B(28295,{value:n})}function ot(n,e){if(n===e)return!0;let t=Lt(n);if(t!==Lt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nr(n).isEqual(Nr(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=bt(i.timestampValue),u=bt(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Et(i.bytesValue).isEqual(Et(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return re(i.geoPointValue.latitude)===re(o.geoPointValue.latitude)&&re(i.geoPointValue.longitude)===re(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return re(i.integerValue)===re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=re(i.doubleValue),u=re(o.doubleValue);return a===u?kr(a)===kr(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return xn(n.arrayValue.values||[],e.arrayValue.values||[],ot);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(oh(a)!==oh(u))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!ot(a[h],u[h])))return!1;return!0})(n,e);default:return B(52216,{left:n})}}function Lr(n,e){return(n.values||[]).find(t=>ot(t,e))!==void 0}function Dn(n,e){if(n===e)return 0;let t=Lt(n),r=Lt(e);if(t!==r)return K(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return K(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=re(o.integerValue||o.doubleValue),h=re(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return ah(n.timestampValue,e.timestampValue);case 4:return ah(Nr(n),Nr(e));case 5:return na(n.stringValue,e.stringValue);case 6:return(function(o,a){let u=Et(o),h=Et(a);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){let m=K(u[f],h[f]);if(m!==0)return m}return K(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=K(re(o.latitude),re(a.latitude));return u!==0?u:K(re(o.longitude),re(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ch(n.arrayValue,e.arrayValue);case 10:return(function(o,a){let u=o.fields||{},h=a.fields||{},f=u[Vn]?.arrayValue,m=h[Vn]?.arrayValue,v=K(f?.values?.length||0,m?.values?.length||0);return v!==0?v:ch(f,m)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===Pi.mapValue&&a===Pi.mapValue)return 0;if(o===Pi.mapValue)return 1;if(a===Pi.mapValue)return-1;let u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let v=0;v<h.length&&v<m.length;++v){let I=na(h[v],m[v]);if(I!==0)return I;let S=Dn(u[h[v]],f[m[v]]);if(S!==0)return S}return K(h.length,m.length)})(n.mapValue,e.mapValue);default:throw B(23264,{he:t})}}function ah(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return K(n,e);let t=bt(n),r=bt(e),i=K(t.seconds,r.seconds);return i!==0?i:K(t.nanos,r.nanos)}function ch(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Dn(t[i],r[i]);if(o)return o}return K(t.length,r.length)}function Mn(n){return sa(n)}function sa(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=bt(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Et(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return F.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=sa(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${sa(t.fields[a])}`;return i+"}"})(n.mapValue):B(61005,{value:n})}function Vi(n){switch(Lt(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ys(n);return e?16+Vi(e):16;case 5:return 2*n.stringValue.length;case 6:return Et(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Vi(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return qt(r.fields,(o,a)=>{i+=o.length+Vi(a)}),i})(n.mapValue);default:throw B(13486,{value:n})}}function oa(n){return!!n&&"integerValue"in n}function Vc(n){return!!n&&"arrayValue"in n}function lh(n){return!!n&&"nullValue"in n}function uh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Di(n){return!!n&&"mapValue"in n}function hd(n){return(n?.mapValue?.fields||{})[Sc]?.stringValue===xc}function Dr(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qt(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dr(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dr(n.arrayValue.values[t]);return e}return z({},n)}function dd(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ud}var Qv={mapValue:{fields:{[Sc]:{stringValue:xc},[Vn]:{arrayValue:{}}}}};var De=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Di(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dr(t)}setAll(e){let t=Me.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Dr(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Di(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ot(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Di(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qt(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Dr(this.value))}};function fd(n){let e=[];return qt(n.fields,(t,r)=>{let i=new Me([t]);if(Di(r)){let o=fd(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Le(e)}var $e=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,j.min(),j.min(),j.min(),De.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,j.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,j.min(),j.min(),De.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,j.min(),j.min(),De.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=De.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=De.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sn=class{constructor(e,t){this.position=e,this.inclusive=t}};function hh(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=F.comparator(F.fromName(a.referenceValue),t.key):r=Dn(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dh(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ot(n.position[t],e.position[t]))return!1;return!0}var on=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function pp(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gi=class{},fe=class n extends Gi{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ca(e,t,r):t==="array-contains"?new ha(e,r):t==="in"?new da(e,r):t==="not-in"?new fa(e,r):t==="array-contains-any"?new ma(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new la(e,r):new ua(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Dn(t,this.value)):t!==null&&Lt(this.value)===Lt(t)&&this.matchesComparison(Dn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ke=class n extends Gi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return md(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function md(n){return n.op==="and"}function gd(n){return _p(n)&&md(n)}function _p(n){for(let e of n.filters)if(e instanceof Ke)return!1;return!0}function aa(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Mn(n.value);if(gd(n))return n.filters.map(e=>aa(e)).join(",");{let e=n.filters.map(t=>aa(t)).join(",");return`${n.op}(${e})`}}function pd(n,e){return n instanceof fe?(function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&ot(r.value,i.value)})(n,e):n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&pd(a,i.filters[u]),!0):!1})(n,e):void B(19439)}function _d(n){return n instanceof fe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mn(t.value)}`})(n):n instanceof Ke?(function(t){return t.op.toString()+" {"+t.getFilters().map(_d).join(" ,")+"}"})(n):"Filter"}var ca=class extends fe{constructor(e,t,r){super(e,t,r),this.key=F.fromName(r.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},la=class extends fe{constructor(e,t){super(e,"in",t),this.keys=yd("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ua=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=yd("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yd(n,e){return(e.arrayValue?.values||[]).map(t=>F.fromName(t.referenceValue))}var ha=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Vc(t)&&Lr(t.arrayValue,this.value)}},da=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Lr(this.value.arrayValue,t)}},fa=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lr(this.value.arrayValue,t)}},ma=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Vc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lr(this.value.arrayValue,r))}};var ga=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}};function fh(n,e=null,t=[],r=[],i=null,o=null,a=null){return new ga(n,e,t,r,i,o,a)}function Dc(n){let e=q(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>aa(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),ps(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Mn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Mn(r)).join(",")),e.Te=t}return e.Te}function Mc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pp(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pd(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dh(n.startAt,e.startAt)&&dh(n.endAt,e.endAt)}function pa(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Rn=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function yp(n,e,t,r,i,o,a,u){return new Rn(n,e,t,r,i,o,a,u)}function Rc(n){return new Rn(n)}function mh(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vp(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function vd(n){return n.collectionGroup!==null}function Pn(n){let e=q(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new _e(Me.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new on(o,r))}),t.has(Me.keyField().canonicalString())||e.Ie.push(new on(Me.keyField(),r))}return e.Ie}function tt(n){let e=q(n);return e.Ee||(e.Ee=wp(e,Pn(n))),e.Ee}function wp(n,e){if(n.limitType==="F")return fh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new on(i.field,o)});let t=n.endAt?new sn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new sn(n.startAt.position,n.startAt.inclusive):null;return fh(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zi(n,e,t){return new Rn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vs(n,e){return Mc(tt(n),tt(e))&&n.limitType===e.limitType}function wd(n){return`${Dc(tt(n))}|lt:${n.limitType}`}function In(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_d(i)).join(", ")}]`),ps(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Mn(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Mn(i)).join(",")),`Target(${r})`})(tt(n))}; limitType=${n.limitType})`}function ws(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):F.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Pn(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,h){let f=hh(a,u,h);return a.inclusive?f<=0:f<0})(r.startAt,Pn(r),i)||r.endAt&&!(function(a,u,h){let f=hh(a,u,h);return a.inclusive?f>=0:f>0})(r.endAt,Pn(r),i))})(n,e)}function bp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bd(n){return(e,t)=>{let r=!1;for(let i of Pn(n)){let o=Ep(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Ep(n,e,t){let r=n.field.isKeyField()?F.comparator(e.key,t.key):(function(o,a,u){let h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Dn(h,f):B(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:n.dir})}}var It=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qt(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return id(this.inner)}size(){return this.innerSize}};var Ip=new oe(F.comparator);function Ct(){return Ip}var Ed=new oe(F.comparator);function Vr(...n){let e=Ed;for(let t of n)e=e.insert(t.key,t);return e}function Id(n){let e=Ed;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zt(){return Mr()}function Cd(){return Mr()}function Mr(){return new It(n=>n.toString(),(n,e)=>n.isEqual(e))}var Cp=new oe(F.comparator),Tp=new _e(F.comparator);function $(...n){let e=Tp;for(let t of n)e=e.add(t);return e}var Ap=new _e(K);function Pp(){return Ap}function Oc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kr(e)?"-0":e}}function Td(n){return{integerValue:""+n}}function Sp(n,e){return np(e)?Td(e):Oc(n,e)}var On=class{constructor(){this._=void 0}};function xp(n,e,t){return n instanceof kn?(function(i,o){let a={fields:{[od]:{stringValue:sd},[cd]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_s(o)&&(o=ys(o)),o&&(a.fields[ad]=o),{mapValue:a}})(t,e):n instanceof an?Pd(n,e):n instanceof cn?Sd(n,e):(function(i,o){let a=Ad(i,o),u=gh(a)+gh(i.Ae);return oa(a)&&oa(i.Ae)?Td(u):Oc(i.serializer,u)})(n,e)}function Vp(n,e,t){return n instanceof an?Pd(n,e):n instanceof cn?Sd(n,e):t}function Ad(n,e){return n instanceof Nn?(function(r){return oa(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var kn=class extends On{},an=class extends On{constructor(e){super(),this.elements=e}};function Pd(n,e){let t=xd(e);for(let r of n.elements)t.some(i=>ot(i,r))||t.push(r);return{arrayValue:{values:t}}}var cn=class extends On{constructor(e){super(),this.elements=e}};function Sd(n,e){let t=xd(e);for(let r of n.elements)t=t.filter(i=>!ot(i,r));return{arrayValue:{values:t}}}var Nn=class extends On{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function gh(n){return re(n.integerValue||n.doubleValue)}function xd(n){return Vc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Dp(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof an&&i instanceof an||r instanceof cn&&i instanceof cn?xn(r.elements,i.elements,ot):r instanceof Nn&&i instanceof Nn?ot(r.Ae,i.Ae):r instanceof kn&&i instanceof kn})(n.transform,e.transform)}var _a=class{constructor(e,t){this.version=e,this.transformResults=t}},nt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mi(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Fn=class{};function Vd(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ln(n.key,nt.none()):new ln(n.key,n.data,nt.none());{let t=n.data,r=De.empty(),i=new _e(Me.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new at(n.key,r,new Le(i.toArray()),nt.none())}}function Mp(n,e,t){n instanceof ln?(function(i,o,a){let u=i.value.clone(),h=_h(i.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof at?(function(i,o,a){if(!Mi(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=_h(i.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Dd(i)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Rr(n,e,t,r){return n instanceof ln?(function(o,a,u,h){if(!Mi(o.precondition,a))return u;let f=o.value.clone(),m=yh(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof at?(function(o,a,u,h){if(!Mi(o.precondition,a))return u;let f=yh(o.fieldTransforms,h,a),m=a.data;return m.setAll(Dd(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))})(n,e,t,r):(function(o,a,u){return Mi(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function Rp(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ad(r.transform,i||null);o!=null&&(t===null&&(t=De.empty()),t.set(r.field,o))}return t||null}function ph(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xn(r,i,(o,a)=>Dp(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ln=class extends Fn{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},at=class extends Fn{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Dd(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function _h(n,e,t){let r=new Map;J(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,Vp(a,u,t[i]))}return r}function yh(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,xp(o,a,e))}return r}var Ln=class extends Fn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ya=class extends Fn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var va=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Mp(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rr(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Rr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Cd();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let h=Vd(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$())}isEqual(e){return this.batchId===e.batchId&&xn(this.mutations,e.mutations,(t,r)=>ph(t,r))&&xn(this.baseMutations,e.baseMutations,(t,r)=>ph(t,r))}},wa=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Cp})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var ba=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ea=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var he,W;function Op(n){switch(n){case A.OK:return B(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return B(15467,{code:n})}}function Md(n){if(n===void 0)return wt("GRPC error has no .code"),A.UNKNOWN;switch(n){case he.OK:return A.OK;case he.CANCELLED:return A.CANCELLED;case he.UNKNOWN:return A.UNKNOWN;case he.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case he.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case he.INTERNAL:return A.INTERNAL;case he.UNAVAILABLE:return A.UNAVAILABLE;case he.UNAUTHENTICATED:return A.UNAUTHENTICATED;case he.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case he.NOT_FOUND:return A.NOT_FOUND;case he.ALREADY_EXISTS:return A.ALREADY_EXISTS;case he.PERMISSION_DENIED:return A.PERMISSION_DENIED;case he.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case he.ABORTED:return A.ABORTED;case he.OUT_OF_RANGE:return A.OUT_OF_RANGE;case he.UNIMPLEMENTED:return A.UNIMPLEMENTED;case he.DATA_LOSS:return A.DATA_LOSS;default:return B(39323,{code:n})}}(W=he||(he={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var kp=null;function Np(){return new TextEncoder}var Fp=new pt([4294967295,4294967295],0);function vh(n){let e=Np().encode(n),t=new jo;return t.update(e),new Uint8Array(t.digest())}function wh(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pt([t,r],0),new pt([i,o],0)]}var Ia=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new en(`Invalid padding: ${t}`);if(r<0)throw new en(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new en(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new en(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pt.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(pt.fromNumber(r)));return i.compare(Fp)===1&&(i=new pt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=vh(e),[r,i]=wh(t);for(let o=0;o<this.hashCount;o++){let a=this.ye(r,i,o);if(!this.we(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;let t=vh(e),[r,i]=wh(t);for(let o=0;o<this.hashCount;o++){let a=this.ye(r,i,o);this.be(a)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},en=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $i=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Br.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(j.min(),i,new oe(K),Ct(),$())}},Br=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$(),$(),$())}};var Sn=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},Ki=class{constructor(e,t){this.targetId=e,this.Ce=t}},Hi=class{constructor(e,t,r=be.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Wi=class{constructor(){this.ve=0,this.Fe=bh(),this.Me=be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$(),t=$(),r=$();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new Br(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=bh()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,J(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Ca=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ct(),this.He=Si(),this.Je=Si(),this.Ze=new oe(K)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(pa(o))if(r===0){let a=new F(o.path);this.et(t,a,$e.newNoDocument(a,j.min()))}else J(r===1,20013,{expectedCount:r});else{let a=this._t(t);if(a!==r){let u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(t);let f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}kp?.lt((function(m,v,I,S,V){let O={localCacheCount:m,existenceFilterCount:v.count,databaseId:I.database,projectId:I.projectId},M=v.unchangedNames;return M&&(O.bloomFilter={applied:V===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:Q=>S?.mightContain(Q)??!1}),O})(a,e.Ce,this.Ge.ht(),u,h))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,u;try{a=Et(r).toUint8Array()}catch(h){if(h instanceof qi)return Ft("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Ia(a,i,o)}catch(h){return Ft(h instanceof en?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,a)=>{let u=this.ot(a);if(u){if(o.current&&pa(u.target)){let h=new F(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,$e.newNoDocument(h,e))}o.Be&&(t.set(a,o.ke()),o.Ke())}});let r=$();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{let f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));let i=new $i(e,t,this.Ze,this.je,r);return this.je=Ct(),this.He=Si(),this.Je=Si(),this.Ze=new oe(K),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Wi,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new _e(K),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new _e(K),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||D("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wi),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Si(){return new oe(F.comparator)}function bh(){return new oe(F.comparator)}var Lp={asc:"ASCENDING",desc:"DESCENDING"},Bp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Up={and:"AND",or:"OR"},Ta=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Aa(n,e){return n.useProto3Json||ps(e)?e:{value:e}}function Qi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rd(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qp(n,e){return Qi(n,e.toTimestamp())}function rt(n){return J(!!n,49232),j.fromTimestamp((function(t){let r=bt(t);return new ue(r.seconds,r.nanos)})(n))}function kc(n,e){return Pa(n,e).canonicalString()}function Pa(n,e){let t=(function(i){return new ie(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Od(n){let e=ie.fromString(n);return J(Bd(e),10190,{key:e.toString()}),e}function Sa(n,e){return kc(n.databaseId,e.path)}function Qo(n,e){let t=Od(e);if(t.get(1)!==n.databaseId.projectId)throw new R(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new R(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new F(Nd(t))}function kd(n,e){return kc(n.databaseId,e)}function jp(n){let e=Od(n);return e.length===4?ie.emptyPath():Nd(e)}function xa(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Nd(n){return J(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Eh(n,e,t){return{name:Sa(n,e),fields:t.value.mapValue.fields}}function Gp(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:B(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(J(m===void 0||typeof m=="string",58123),be.fromBase64String(m||"")):(J(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),be.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){let m=f.code===void 0?A.UNKNOWN:Md(f.code);return new R(m,f.message||"")})(a);t=new Hi(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Qo(n,r.document.name),o=rt(r.document.updateTime),a=r.document.createTime?rt(r.document.createTime):j.min(),u=new De({mapValue:{fields:r.document.fields}}),h=$e.newFoundDocument(i,o,a,u),f=r.targetIds||[],m=r.removedTargetIds||[];t=new Sn(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Qo(n,r.document),o=r.readTime?rt(r.readTime):j.min(),a=$e.newNoDocument(i,o),u=r.removedTargetIds||[];t=new Sn([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Qo(n,r.document),o=r.removedTargetIds||[];t=new Sn([],o,i,null)}else{if(!("filter"in e))return B(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new Ea(i,o),u=r.targetId;t=new Ki(u,a)}}return t}function zp(n,e){let t;if(e instanceof ln)t={update:Eh(n,e.key,e.value)};else if(e instanceof Ln)t={delete:Sa(n,e.key)};else if(e instanceof at)t={update:Eh(n,e.key,e.data),updateMask:Zp(e.fieldMask)};else{if(!(e instanceof ya))return B(16599,{dt:e.type});t={verify:Sa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,a){let u=a.transform;if(u instanceof kn)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof an)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof cn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Nn)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw B(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:qp(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)})(n,e.precondition)),t}function $p(n,e){return n&&n.length>0?(J(e!==void 0,14353),n.map(t=>(function(i,o){let a=i.updateTime?rt(i.updateTime):rt(o);return a.isEqual(j.min())&&(a=rt(o)),new _a(a,i.transformResults||[])})(t,e))):[]}function Kp(n,e){return{documents:[kd(n,e.path)]}}function Hp(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kd(n,i);let o=(function(f){if(f.length!==0)return Ld(Ke.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(m=>(function(I){return{field:Cn(I.field),direction:Jp(I.dir)}})(m))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=Aa(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function Wp(n){let e=jp(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){J(r===1,65062);let m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(v){let I=Fd(v);return I instanceof Ke&&gd(I)?I.getFilters():[I]})(t.where));let a=[];t.orderBy&&(a=(function(v){return v.map(I=>(function(V){return new on(Tn(V.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(I))})(t.orderBy));let u=null;t.limit&&(u=(function(v){let I;return I=typeof v=="object"?v.value:v,ps(I)?null:I})(t.limit));let h=null;t.startAt&&(h=(function(v){let I=!!v.before,S=v.values||[];return new sn(S,I)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){let I=!v.before,S=v.values||[];return new sn(S,I)})(t.endAt)),yp(e,i,a,o,u,"F",h,f)}function Qp(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Fd(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Tn(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Tn(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Tn(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Tn(t.unaryFilter.field);return fe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}})(n):n.fieldFilter!==void 0?(function(t){return fe.create(Tn(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ke.create(t.compositeFilter.filters.map(r=>Fd(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}})(t.compositeFilter.op))})(n):B(30097,{filter:n})}function Jp(n){return Lp[n]}function Yp(n){return Bp[n]}function Xp(n){return Up[n]}function Cn(n){return{fieldPath:n.canonicalString()}}function Tn(n){return Me.fromServerFormat(n.fieldPath)}function Ld(n){return n instanceof fe?(function(t){if(t.op==="=="){if(uh(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NAN"}};if(lh(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uh(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NOT_NAN"}};if(lh(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cn(t.field),op:Yp(t.op),value:t.value}}})(n):n instanceof Ke?(function(t){let r=t.getFilters().map(i=>Ld(i));return r.length===1?r[0]:{compositeFilter:{op:Xp(t.op),filters:r}}})(n):B(54877,{filter:n})}function Zp(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bd(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Ud(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var Ur=class n{constructor(e,t,r,i,o=j.min(),a=j.min(),u=be.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Va=class{constructor(e){this.yt=e}};function qd(n){let e=Wp({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zi(e,e.limit,"L"):e}var Ji=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(re(e.integerValue));else if("doubleValue"in e){let r=re(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),kr(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=bt(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Et(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?dd(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):hd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):B(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Vn,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(re(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),F.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Ji.Wt=new Ji;var Da=class{constructor(){this.Sn=new Ma}addToCollectionParentIndex(e,t){return this.Sn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(rn.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Ma=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _e(ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _e(ie.comparator)).toArray()}};var Jv=new Uint8Array(0);var Ih={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jd=41943040,Fe=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Fe.DEFAULT_COLLECTION_PERCENTILE=10,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fe.DEFAULT=new Fe(jd,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fe.DISABLED=new Fe(-1,0,0);var qr=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var Ch="LruGarbageCollector",e_=1048576;function Th([n,e],[t,r]){let i=K(n,t);return i===0?K(e,r):i}var Ra=class{constructor(e){this.Pr=e,this.buffer=new _e(Th),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Th(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Oa=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){D(Ch,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kn(t)?D(Ch,"Ignoring IndexedDB error during garbage collection: ",t):await $n(t)}await this.Ar(3e5)})}},ka=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(Ac.ce);let r=new Ra(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(Ih)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ih):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,a,u,h,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,a=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(f=Date.now(),En()<=H.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}};function t_(n,e){return new ka(n,e)}var Na=class{constructor(){this.changes=new It(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Fa=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var La=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Rr(r.mutation,i,Le.empty(),ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$()){let i=Zt();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Vr();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Zt();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=Ct(),a=Mr(),u=(function(){return Mr()})();return t.forEach((h,f)=>{let m=r.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof at)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Rr(m.mutation,f,m.mutation.getFieldMask(),ue.now())):a.set(f.key,Le.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),t.forEach((f,m)=>u.set(f,new Fa(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,t){let r=Mr(),i=new oe((a,u)=>a-u),o=$();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(h=>{let f=t.get(h);if(f===null)return;let m=r.get(h)||Le.empty();m=u.applyToLocalView(f,m),r.set(h,m);let v=(i.get(u.batchId)||$()).add(h);i=i.insert(u.batchId,v)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let h=u.getNext(),f=h.key,m=h.value,v=Cd();m.forEach(I=>{if(!o.has(I)){let S=Vd(t.get(I),r.get(I));S!==null&&v.set(I,S),o=o.add(I)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return P.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return vp(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(Zt()),u=Or,h=o;return a.next(f=>P.forEach(f,(m,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(m)?P.resolve():this.remoteDocumentCache.getEntry(e,m).next(I=>{h=h.insert(m,I)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,$())).next(m=>({batchId:u,changes:Id(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next(r=>{let i=Vr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=Vr();return this.indexManager.getCollectionParents(e,o).next(u=>P.forEach(u,h=>{let f=(function(v,I){return new Rn(I,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(m=>{m.forEach((v,I)=>{a=a.insert(v,I)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((h,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,$e.newInvalidDocument(m)))});let u=Vr();return a.forEach((h,f)=>{let m=o.get(h);m!==void 0&&Rr(m.mutation,f,Le.empty(),ue.now()),ws(t,f)&&(u=u.insert(h,f))}),u})}};var Ba=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return P.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:rt(i.createTime)}})(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:qd(i.bundledQuery),readTime:rt(i.readTime)}})(t)),P.resolve()}};var Ua=class{constructor(){this.overlays=new oe(F.comparator),this.Lr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Zt();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Zt(),o=t.length+1,a=new F(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new oe((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=Zt(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let u=Zt(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=i)););return P.resolve(u)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ba(t,r));let o=this.Lr.get(t);o===void 0&&(o=$(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var qa=class{constructor(){this.sessionToken=be.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var jr=class{constructor(){this.kr=new _e(de.Kr),this.qr=new _e(de.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new de(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new de(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new F(new ie([])),r=new de(t,e),i=new de(t,e+1),o=[];return this.qr.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new F(new ie([])),r=new de(t,e),i=new de(t,e+1),o=$();return this.qr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new de(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},de=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return F.comparator(e.key,t.key)||K(e.Hr,t.Hr)}static Ur(e,t){return K(e.Hr,t.Hr)||F.comparator(e.key,t.key)}};var ja=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new _e(de.Kr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new va(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.Jr=this.Jr.add(new de(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,t){return P.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Pc:this.Yn-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new de(t,0),i=new de(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],a=>{let u=this.Zr(a.Hr);o.push(u)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(K);return t.forEach(i=>{let o=new de(i,0),a=new de(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],u=>{r=r.add(u.Hr)})}),P.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;F.isDocumentKey(o)||(o=o.child(""));let a=new de(new F(o),0),u=new _e(K);return this.Jr.forEachWhile(h=>{let f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)},a),P.resolve(this.Yr(u))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){J(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return P.forEach(t.mutations,i=>{let o=new de(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new de(t,0),i=this.Jr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Ga=class{constructor(e){this.ti=e,this.docs=(function(){return new oe(F.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(t))}getEntries(e,t){let r=Ct();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$e.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ct(),a=t.path,u=new F(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){let{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Zg(Xg(m),r)<=0||(i.has(m.key)||ws(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){B(9500)}ni(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new za(this)}getSize(e){return P.resolve(this.size)}},za=class extends Na{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var $a=class{constructor(e){this.persistence=e,this.ri=new It(t=>Dc(t),Mc),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.ii=0,this.si=new jr,this.targetCount=0,this.oi=qr._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),P.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new qr(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.lr(t),P.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.si.containsKey(t))}};var Yi=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Ac(0),this.ui=!1,this.ui=!0,this.ci=new qa,this.referenceDelegate=e(this),this.li=new $a(this),this.indexManager=new Da,this.remoteDocumentCache=(function(i){return new Ga(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new Va(t),this.Pi=new Ba(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ua,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new ja(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){D("MemoryPersistence","Starting transaction:",e);let i=new Ka(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return P.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},Ka=class extends ra{constructor(e){super(),this.currentSequenceNumber=e}},Ha=class n{constructor(e){this.persistence=e,this.Ri=new jr,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw B(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.di,r=>{let i=F.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,j.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return P.or([()=>P.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Xi=class n{constructor(e,t){this.persistence=e,this.fi=new It(r=>rp(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=t_(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return P.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,t).next(u=>{u||(r++,o.removeEntry(a,j.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),P.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vi(e.data.value)),t}wr(e,t,r){return P.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Wa=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=$(),i=$();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Qa=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ja=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Mu()?8:tp(Du())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Qa;return this.ys(e,t,a).next(u=>{if(o.result=u,this.As)return this.ws(e,t,a,u.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(En()<=H.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",In(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(En()<=H.DEBUG&&D("QueryEngine","Query:",In(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(En()<=H.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",In(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tt(t))):P.resolve())}gs(e,t){if(mh(t))return P.resolve(null);let r=tt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=zi(t,null,"F"),r=tt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=$(...o);return this.fs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{let f=this.bs(t,u);return this.Ss(t,f,a,h.readTime)?this.gs(e,zi(t,null,"F")):this.Ds(e,f,t,h)}))})))}ps(e,t,r,i){return mh(t)||i.isEqual(j.min())?P.resolve(null):this.fs.getDocuments(e,r).next(o=>{let a=this.bs(t,o);return this.Ss(t,a,r,i)?P.resolve(null):(En()<=H.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),In(t)),this.Ds(e,a,t,Yg(i,Or)).next(u=>u))})}bs(e,t){let r=new _e(bd(e));return t.forEach((i,o)=>{ws(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return En()<=H.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",In(t)),this.fs.getDocumentsMatchingQuery(e,t,rn.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var Nc="LocalStore",n_=3e8,Ya=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new oe(K),this.Fs=new It(o=>Dc(o),Mc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new La(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function r_(n,e,t,r){return new Ya(n,e,t,r)}async function Gd(n,e){let t=q(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],h=$();for(let f of i){a.push(f.batchId);for(let m of f.mutations)h=h.add(m.key)}for(let f of o){u.push(f.batchId);for(let m of f.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(f=>({Ns:f,removedBatchIds:a,addedBatchIds:u}))})})}function i_(n,e){let t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,m){let v=f.batch,I=v.keys(),S=P.resolve();return I.forEach(V=>{S=S.next(()=>m.getEntry(h,V)).next(O=>{let M=f.docVersions.get(V);J(M!==null,48541),O.version.compareTo(M)<0&&(v.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),m.addEntry(O)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(h,v))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=$();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zd(n){let e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function s_(n,e){let t=q(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let u=[];e.targetChanges.forEach((m,v)=>{let I=i.get(v);if(!I)return;u.push(t.li.removeMatchingKeys(o,m.removedDocuments,v).next(()=>t.li.addMatchingKeys(o,m.addedDocuments,v)));let S=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(be.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,r)),i=i.insert(v,S),(function(O,M,Q){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=n_?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(I,S,m)&&u.push(t.li.updateTargetData(o,S))});let h=Ct(),f=$();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(o_(o,a,e.documentUpdates).next(m=>{h=m.Bs,f=m.Ls})),!r.isEqual(j.min())){let m=t.li.getLastRemoteSnapshotVersion(o).next(v=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(m)}return P.waitFor(u).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(t.vs=i,o))}function o_(n,e,t){let r=$(),i=$();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Ct();return t.forEach((u,h)=>{let f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(j.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):D(Nc,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Bs:a,Ls:i}})}function a_(n,e){let t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Pc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function c_(n,e){let t=q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.li.allocateTargetId(r).next(a=>(i=new Ur(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function Xa(n,e,t){let r=q(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Kn(a))throw a;D(Nc,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Ah(n,e,t){let r=q(n),i=j.min(),o=$();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(h,f,m){let v=q(h),I=v.Fs.get(m);return I!==void 0?P.resolve(v.vs.get(I)):v.li.getTargetData(f,m)})(r,a,tt(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:j.min(),t?o:$())).next(u=>(l_(r,bp(e),u),{documents:u,ks:o})))}function l_(n,e,t){let r=n.Ms.get(e)||j.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var Zi=class{constructor(){this.activeTargetIds=Pp()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Za=class{constructor(){this.vo=new Zi,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Zi,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ec=class{Mo(e){}shutdown(){}};var Ph="ConnectivityMonitor",es=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){D(Ph,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){D(Ph,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xi=null;function tc(){return xi===null?xi=(function(){return 268435456+Math.round(2147483648*Math.random())})():xi++,"0x"+xi.toString(16)}var Jo="RestConnection",u_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},nc=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===ji?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let a=tc(),u=this.Qo(e,t.toUriEncodedString());D(Jo,`Sending RPC '${e}' ${a}:`,u,r);let h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,o);let{host:f}=new URL(u),m=bi(f);return this.zo(e,u,h,r,m).then(v=>(D(Jo,`Received RPC '${e}' ${a}: `,v),v),v=>{throw Ft(Jo,`RPC '${e}' ${a} failed with error: `,v,"url: ",u,"request:",r),v})}jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gn})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=u_[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var rc=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Te="WebChannelConnection",xr=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},ts=class n extends nc{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=Ko();xr(e,$o.STAT_EVENT,t=>{t.stat===Ai.PROXY?D(Te,"STAT_EVENT: detected buffering proxy"):t.stat===Ai.NOPROXY&&D(Te,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let a=tc();return new Promise((u,h)=>{let f=new Go;f.setWithCredentials(!0),f.listenOnce(zo.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Sr.NO_ERROR:let v=f.getResponseJson();D(Te,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case Sr.TIMEOUT:D(Te,`RPC '${e}' ${a} timed out`),h(new R(A.DEADLINE_EXCEEDED,"Request time out"));break;case Sr.HTTP_ERROR:let I=f.getStatus();if(D(Te,`RPC '${e}' ${a} failed with status:`,I,"response text:",f.getResponseText()),I>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);let V=S?.error;if(V&&V.status&&V.message){let O=(function(Q){let Y=Q.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(Y)>=0?Y:A.UNKNOWN})(V.status);h(new R(O,V.message))}else h(new R(A.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new R(A.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{D(Te,`RPC '${e}' ${a} completed.`)}});let m=JSON.stringify(i);D(Te,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",m,r,15)})}T_(e,t,r){let i=tc(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");D(Te,`Creating RPC '${e}' stream ${i}: ${f}`,u);let m=a.createWebChannel(f,u);this.I_(m);let v=!1,I=!1,S=new rc({Ho:V=>{I?D(Te,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(v||(D(Te,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),D(Te,`RPC '${e}' stream ${i} sending:`,V),m.send(V))},Jo:()=>m.close()});return xr(m,bn.EventType.OPEN,()=>{I||(D(Te,`RPC '${e}' stream ${i} transport opened.`),S.i_())}),xr(m,bn.EventType.CLOSE,()=>{I||(I=!0,D(Te,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(m))}),xr(m,bn.EventType.ERROR,V=>{I||(I=!0,Ft(Te,`RPC '${e}' stream ${i} transport errored. Name:`,V.name,"Message:",V.message),S.o_(new R(A.UNAVAILABLE,"The operation could not be completed")))}),xr(m,bn.EventType.MESSAGE,V=>{if(!I){let O=V.data[0];J(!!O,16349);let M=O,Q=M?.error||M[0]?.error;if(Q){D(Te,`RPC '${e}' stream ${i} received error:`,Q);let Y=Q.status,Z=(function(ve){let w=he[ve];if(w!==void 0)return Md(w)})(Y),Re=Q.message;Z===void 0&&(Z=A.INTERNAL,Re="Unknown error status: "+Y+" with message "+Q.message),I=!0,S.o_(new R(Z,Re)),m.close()}else D(Te,`RPC '${e}' stream ${i} received:`,O),S.__(O)}}),n.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Ho()}};function h_(n){return new ts(n)}function Yo(){return typeof document<"u"?document:null}function $r(n){return new Ta(n,!0)}ts.c_=!1;var ns=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var Sh="PersistentStream",rs=class{constructor(e,t,r,i,o,a,u,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ns(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(wt(t.toString()),wt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new R(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return D(Sh,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(D(Sh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ic=class extends rs{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Gp(this.serializer,e),r=(function(o){if(!("targetChange"in o))return j.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?j.min():a.readTime?rt(a.readTime):j.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=xa(this.serializer),t.addTarget=(function(o,a){let u,h=a.target;if(u=pa(h)?{documents:Kp(o,h)}:{query:Hp(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Rd(o,a.resumeToken);let f=Aa(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(j.min())>0){u.readTime=Qi(o,a.snapshotVersion.toTimestamp());let f=Aa(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);let r=Qp(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=xa(this.serializer),t.removeTarget=e,this.K_(t)}},sc=class extends rs{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return J(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){J(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=$p(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=xa(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>zp(this.serializer,r))};this.K_(t)}};var oc=class{},ac=class extends oc{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new R(A.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Pa(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(A.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.jo(e,Pa(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new R(A.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function d_(n,e,t,r){return new ac(n,e,t,r)}var cc=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wt(t),this.aa=!1):D("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var un="RemoteStore",lc=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{fn(this)&&(D(un,"Restarting streams for network reachability change."),await(async function(h){let f=q(h);f.Ea.add(4),await Kr(f),f.Va.set("Unknown"),f.Ea.delete(4),await bs(f)})(this))})}),this.Va=new cc(r,i)}};async function bs(n){if(fn(n))for(let e of n.Ra)await e(!0)}async function Kr(n){for(let e of n.Ra)await e(!1)}function $d(n,e){let t=q(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Uc(t)?Bc(t):Hn(t).O_()&&Lc(t,e))}function Fc(n,e){let t=q(n),r=Hn(t);t.Ia.delete(e),r.O_()&&Kd(t,e),t.Ia.size===0&&(r.O_()?r.L_():fn(t)&&t.Va.set("Unknown"))}function Lc(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hn(n).Z_(e)}function Kd(n,e){n.da.$e(e),Hn(n).X_(e)}function Bc(n){n.da=new Ca({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Hn(n).start(),n.Va.ua()}function Uc(n){return fn(n)&&!Hn(n).x_()&&n.Ia.size>0}function fn(n){return q(n).Ea.size===0}function Hd(n){n.da=void 0}async function f_(n){n.Va.set("Online")}async function m_(n){n.Ia.forEach((e,t)=>{Lc(n,e)})}async function g_(n,e){Hd(n),Uc(n)?(n.Va.ha(e),Bc(n)):n.Va.set("Unknown")}async function p_(n,e,t){if(n.Va.set("Online"),e instanceof Hi&&e.state===2&&e.cause)try{await(async function(i,o){let a=o.cause;for(let u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.da.removeTarget(u))})(n,e)}catch(r){D(un,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await is(n,r)}else if(e instanceof Sn?n.da.Xe(e):e instanceof Ki?n.da.st(e):n.da.tt(e),!t.isEqual(j.min()))try{let r=await zd(n.localStore);t.compareTo(r)>=0&&await(function(o,a){let u=o.da.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){let m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{let m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(be.EMPTY_BYTE_STRING,m.snapshotVersion)),Kd(o,h);let v=new Ur(m.target,h,f,m.sequenceNumber);Lc(o,v)}),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){D(un,"Failed to raise snapshot:",r),await is(n,r)}}async function is(n,e,t){if(!Kn(e))throw e;n.Ea.add(1),await Kr(n),n.Va.set("Offline"),t||(t=()=>zd(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{D(un,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await bs(n)})}function Wd(n,e){return e().catch(t=>is(n,t,e))}async function Es(n){let e=q(n),t=Bt(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pc;for(;__(e);)try{let i=await a_(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,y_(e,i)}catch(i){await is(e,i)}Qd(e)&&Jd(e)}function __(n){return fn(n)&&n.Ta.length<10}function y_(n,e){n.Ta.push(e);let t=Bt(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Qd(n){return fn(n)&&!Bt(n).x_()&&n.Ta.length>0}function Jd(n){Bt(n).start()}async function v_(n){Bt(n).ra()}async function w_(n){let e=Bt(n);for(let t of n.Ta)e.ea(t.mutations)}async function b_(n,e,t){let r=n.Ta.shift(),i=wa.from(r,e,t);await Wd(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Es(n)}async function E_(n,e){e&&Bt(n).Y_&&await(async function(r,i){if((function(a){return Op(a)&&a!==A.ABORTED})(i.code)){let o=r.Ta.shift();Bt(r).B_(),await Wd(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Es(r)}})(n,e),Qd(n)&&Jd(n)}async function xh(n,e){let t=q(n);t.asyncQueue.verifyOperationInProgress(),D(un,"RemoteStore received new credentials");let r=fn(t);t.Ea.add(3),await Kr(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bs(t)}async function I_(n,e){let t=q(n);e?(t.Ea.delete(2),await bs(t)):e||(t.Ea.add(2),await Kr(t),t.Va.set("Unknown"))}function Hn(n){return n.ma||(n.ma=(function(t,r,i){let o=q(t);return o.sa(),new ic(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:f_.bind(null,n),Yo:m_.bind(null,n),t_:g_.bind(null,n),J_:p_.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),Uc(n)?Bc(n):n.Va.set("Unknown")):(await n.ma.stop(),Hd(n))})),n.ma}function Bt(n){return n.fa||(n.fa=(function(t,r,i){let o=q(t);return o.sa(),new sc(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:v_.bind(null,n),t_:E_.bind(null,n),ta:w_.bind(null,n),na:b_.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await Es(n)):(await n.fa.stop(),n.Ta.length>0&&(D(un,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var uc=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qc(n,e){if(wt("AsyncQueue",`${e}: ${n}`),Kn(n))return new R(A.UNAVAILABLE,`${e}: ${n}`);throw n}var Gr=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||F.comparator(t.key,r.key):(t,r)=>F.comparator(t.key,r.key),this.keyedMap=Vr(),this.sortedSet=new oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ss=class{constructor(){this.ga=new oe(F.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):B(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},hn=class n{constructor(e,t,r,i,o,a,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,Gr.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var hc=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},dc=class{constructor(){this.queries=Vh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=q(t),o=i.queries;i.queries=Vh(),o.forEach((a,u)=>{for(let h of u.ba)h.onError(r)})})(this,new R(A.ABORTED,"Firestore shutting down"))}};function Vh(){return new It(n=>wd(n),vs)}async function C_(n,e){let t=q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new hc,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){let u=qc(a,`Initialization of query '${In(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&jc(t)}async function T_(n,e){let t=q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function A_(n,e){let t=q(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let u of a.ba)u.Fa(i)&&(r=!0);a.wa=i}}r&&jc(t)}function P_(n,e,t){let r=q(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function jc(n){n.Ca.forEach(e=>{e.next()})}var fc,Dh;(Dh=fc||(fc={})).Ma="default",Dh.Cache="cache";var mc=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new hn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fc.Cache}};var os=class{constructor(e){this.key=e}},as=class{constructor(e){this.key=e}},gc=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$(),this.mutatedKeys=$(),this.eu=bd(e),this.tu=new Gr(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new ss,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,v)=>{let I=i.get(m),S=ws(this.query,v)?v:null,V=!!I&&this.mutatedKeys.has(I.key),O=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),M=!1;I&&S?I.data.isEqual(S.data)?V!==O&&(r.track({type:3,doc:S}),M=!0):this.su(I,S)||(r.track({type:2,doc:S}),M=!0,(h&&this.eu(S,h)>0||f&&this.eu(S,f)<0)&&(u=!0)):!I&&S?(r.track({type:0,doc:S}),M=!0):I&&!S&&(r.track({type:1,doc:I}),M=!0,(h||f)&&(u=!0)),M&&(S?(a=a.add(S),o=O?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Ss:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort((m,v)=>(function(S,V){let O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Vt:M})}};return O(S)-O(V)})(m.type,v.type)||this.eu(m.doc,v.doc)),this.ou(r),i=i??!1;let u=t&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,f=h!==this.Xa;return this.Xa=h,a.length!==0||f?{snapshot:new hn(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ss,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=$(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new as(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new os(r))}),t}cu(e){this.Za=e.ks,this.Ya=$();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hn.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Gc="SyncEngine",pc=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},_c=class{constructor(e){this.key=e,this.hu=!1}},yc=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new It(u=>wd(u),vs),this.Iu=new Map,this.Eu=new Set,this.Ru=new oe(F.comparator),this.Au=new Map,this.Vu=new jr,this.du={},this.mu=new Map,this.fu=qr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function S_(n,e,t=!0){let r=nf(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Yd(r,e,t,!0),i}async function x_(n,e){let t=nf(n);await Yd(t,e,!0,!1)}async function Yd(n,e,t,r){let i=await c_(n.localStore,tt(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),u;return r&&(u=await V_(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&$d(n.remoteStore,i),u}async function V_(n,e,t,r,i){n.pu=(v,I,S)=>(async function(O,M,Q,Y){let Z=M.view.ru(Q);Z.Ss&&(Z=await Ah(O.localStore,M.query,!1).then(({documents:w})=>M.view.ru(w,Z)));let Re=Y&&Y.targetChanges.get(M.targetId),Be=Y&&Y.targetMismatches.get(M.targetId)!=null,ve=M.view.applyChanges(Z,O.isPrimaryClient,Re,Be);return Rh(O,M.targetId,ve.au),ve.snapshot})(n,v,I,S);let o=await Ah(n.localStore,e,!0),a=new gc(e,o.ks),u=a.ru(o.documents),h=Br.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,h);Rh(n,t,f.au);let m=new pc(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function D_(n,e,t){let r=q(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(a=>!vs(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Fc(r.remoteStore,i.targetId),vc(r,i.targetId)}).catch($n)):(vc(r,i.targetId),await Xa(r.localStore,i.targetId,!0))}async function M_(n,e){let t=q(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fc(t.remoteStore,r.targetId))}async function R_(n,e,t){let r=U_(n);try{let i=await(function(a,u){let h=q(a),f=ue.now(),m=u.reduce((S,V)=>S.add(V.key),$()),v,I;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>{let V=Ct(),O=$();return h.xs.getEntries(S,m).next(M=>{V=M,V.forEach((Q,Y)=>{Y.isValidDocument()||(O=O.add(Q))})}).next(()=>h.localDocuments.getOverlayedDocuments(S,V)).next(M=>{v=M;let Q=[];for(let Y of u){let Z=Rp(Y,v.get(Y.key).overlayedDocument);Z!=null&&Q.push(new at(Y.key,Z,fd(Z.value.mapValue),nt.exists(!0)))}return h.mutationQueue.addMutationBatch(S,f,Q,u)}).next(M=>{I=M;let Q=M.applyToLocalDocumentSet(v,O);return h.documentOverlayCache.saveOverlays(S,M.batchId,Q)})}).then(()=>({batchId:I.batchId,changes:Id(v)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,h){let f=a.du[a.currentUser.toKey()];f||(f=new oe(K)),f=f.insert(u,h),a.du[a.currentUser.toKey()]=f})(r,i.batchId,t),await Hr(r,i.changes),await Es(r.remoteStore)}catch(i){let o=qc(i,"Failed to persist write");t.reject(o)}}async function Xd(n,e){let t=q(n);try{let r=await s_(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Au.get(o);a&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?J(a.hu,14607):i.removedDocuments.size>0&&(J(a.hu,42227),a.hu=!1))}),await Hr(t,r,e)}catch(r){await $n(r)}}function Mh(n,e,t){let r=q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)}),(function(a,u){let h=q(a);h.onlineState=u;let f=!1;h.queries.forEach((m,v)=>{for(let I of v.ba)I.va(u)&&(f=!0)}),f&&jc(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O_(n,e,t){let r=q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let a=new oe(F.comparator);a=a.insert(o,$e.newNoDocument(o,j.min()));let u=$().add(o),h=new $i(j.min(),new Map,new oe(K),a,u);await Xd(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),zc(r)}else await Xa(r.localStore,e,!1).then(()=>vc(r,e,t)).catch($n)}async function k_(n,e){let t=q(n),r=e.batch.batchId;try{let i=await i_(t.localStore,e);ef(t,r,null),Zd(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hr(t,i)}catch(i){await $n(i)}}async function N_(n,e,t){let r=q(n);try{let i=await(function(a,u){let h=q(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(v=>(J(v!==null,37113),m=v.keys(),h.mutationQueue.removeMutationBatch(f,v))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})})(r.localStore,e);ef(r,e,t),Zd(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hr(r,i)}catch(i){await $n(i)}}function Zd(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function ef(n,e,t){let r=q(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function vc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||tf(n,r)})}function tf(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(Fc(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),zc(n))}function Rh(n,e,t){for(let r of t)r instanceof os?(n.Vu.addReference(r.key,e),F_(n,r)):r instanceof as?(D(Gc,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||tf(n,r.key)):B(19791,{wu:r})}function F_(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(D(Gc,"New document in limbo: "+t),n.Eu.add(r),zc(n))}function zc(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new F(ie.fromString(e)),r=n.fu.next();n.Au.set(r,new _c(t)),n.Ru=n.Ru.insert(t,r),$d(n.remoteStore,new Ur(tt(Rc(t.path)),r,"TargetPurposeLimboResolution",Ac.ce))}}async function Hr(n,e,t){let r=q(n),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((u,h)=>{a.push(r.pu(h,e,t).then(f=>{if((f||t)&&r.isPrimaryClient){let m=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){i.push(f);let m=Wa.Es(h.targetId,f);o.push(m)}}))}),await Promise.all(a),r.Pu.J_(i),await(async function(h,f){let m=q(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>P.forEach(f,I=>P.forEach(I.Ts,S=>m.persistence.referenceDelegate.addReference(v,I.targetId,S)).next(()=>P.forEach(I.Is,S=>m.persistence.referenceDelegate.removeReference(v,I.targetId,S)))))}catch(v){if(!Kn(v))throw v;D(Nc,"Failed to update sequence numbers: "+v)}for(let v of f){let I=v.targetId;if(!v.fromCache){let S=m.vs.get(I),V=S.snapshotVersion,O=S.withLastLimboFreeSnapshotVersion(V);m.vs=m.vs.insert(I,O)}}})(r.localStore,o))}async function L_(n,e){let t=q(n);if(!t.currentUser.isEqual(e)){D(Gc,"User change. New user:",e.toKey());let r=await Gd(t.localStore,e);t.currentUser=e,(function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new R(A.CANCELLED,a))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hr(t,r.Ns)}}function B_(n,e){let t=q(n),r=t.Au.get(e);if(r&&r.hu)return $().add(r.key);{let i=$(),o=t.Iu.get(e);if(!o)return i;for(let a of o){let u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}function nf(n){let e=q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O_.bind(null,e),e.Pu.J_=A_.bind(null,e.eventManager),e.Pu.yu=P_.bind(null,e.eventManager),e}function U_(n){let e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N_.bind(null,e),e}var $c=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$r(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return r_(this.persistence,new Ja,t.initialUser,this.serializer)}Cu(t){return new Yi(Ha.Vi,this.serializer)}Du(t){return new Za}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),cs=class extends $c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){J(this.persistence.referenceDelegate instanceof Xi,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Oa(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Fe.withCacheSize(this.cacheSizeBytes):Fe.DEFAULT;return new Yi(r=>Xi.Vi(r,t),this.serializer)}};var rf=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Mh(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=L_.bind(null,this.syncEngine),await I_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dc})()}createDatastore(t){let r=$r(t.databaseInfo.databaseId),i=h_(t.databaseInfo);return d_(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,a,u,h){return new lc(i,o,a,u,h)})(this.localStore,this.datastore,t.asyncQueue,r=>Mh(this.syncEngine,r,0),(function(){return es.v()?new es:new ec})())}createSyncEngine(t,r){return(function(o,a,u,h,f,m,v){let I=new yc(o,a,u,h,f,m);return v&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=q(r);D(un,"RemoteStore shutting down."),i.Ea.add(5),await Kr(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var wc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ut="FirestoreClient",bc=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=pe.UNAUTHENTICATED,this.clientId=nn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{D(Ut,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(D(Ut,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Xo(n,e){n.asyncQueue.verifyOperationInProgress(),D(Ut,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gd(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Oh(n,e){n.asyncQueue.verifyOperationInProgress();let t=await q_(n);D(Ut,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>xh(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>xh(e.remoteStore,i)),n._onlineComponents=e}async function q_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){D(Ut,"Using user provided OfflineComponentProvider");try{await Xo(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ft("Error using user provided cache. Falling back to memory cache: "+t),await Xo(n,new $c)}}else D(Ut,"Using default OfflineComponentProvider"),await Xo(n,new cs(void 0));return n._offlineComponents}async function sf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(D(Ut,"Using user provided OnlineComponentProvider"),await Oh(n,n._uninitializedComponentsProvider._online)):(D(Ut,"Using default OnlineComponentProvider"),await Oh(n,new rf))),n._onlineComponents}function j_(n){return sf(n).then(e=>e.syncEngine)}async function G_(n){let e=await sf(n),t=e.eventManager;return t.onListen=S_.bind(null,e.syncEngine),t.onUnlisten=D_.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=x_.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M_.bind(null,e.syncEngine),t}function of(n,e,t={}){let r=new Ze;return n.asyncQueue.enqueueAndForget(async()=>(function(o,a,u,h,f){let m=new wc({next:I=>{m.Nu(),a.enqueueAndForget(()=>T_(o,v)),I.fromCache&&h.source==="server"?f.reject(new R(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(I)},error:I=>f.reject(I)}),v=new mc(u,m,{includeMetadataChanges:!0,Ka:!0});return C_(o,v)})(await G_(n),n.asyncQueue,e,t,r)),r.promise}function af(n,e){let t=new Ze;return n.asyncQueue.enqueueAndForget(async()=>R_(await j_(n),e,t)),t.promise}function cf(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var z_="ComponentProvider",kh=new Map;function $_(n,e,t,r,i){return new ia(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,cf(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var lf="firestore.googleapis.com",Nh=!0,ls=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new R(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lf,this.ssl=Nh}else this.host=e.host,this.ssl=e.ssl??Nh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jd;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e_)throw new R(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cf(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new R(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new R(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new R(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bn=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ls({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new R(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new R(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ls(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Oi;switch(r.type){case"firstParty":return new ta(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new R(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=kh.get(t);r&&(D(z_,"Removing Datastore"),kh.delete(t),r.terminate())})(this),Promise.resolve()}};function uf(n,e,t,r={}){n=ct(n,Bn);let i=bi(e),o=n._getSettings(),a=te(z({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;i&&(Su(`https://${u}`),Vu("Firestore",!0)),o.host!==lf&&o.host!==u&&Ft("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=te(z({},o),{host:u,ssl:i,emulatorOptions:r});if(!Yt(h,a)&&(n._setSettings(h),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=pe.MOCK_USER;else{f=xu(r.mockUserToken,n._app?.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new R(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pe(v)}n._authCredentials=new Zo(new Ri(f,m))}}var Un=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ye=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(zn(t,n._jsonSchema))return new n(e,r||null,new F(ie.fromString(t.referencePath)))}};ye._jsonSchemaVersion="firestore/documentReference/1.0",ye._jsonSchema={type:le("string",ye._jsonSchemaVersion),referencePath:le("string")};var yt=class n extends Un{constructor(e,t,r){super(e,t,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ye(this.firestore,null,new F(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Kc(n,e,...t){if(n=Ye(n),qh("collection","path",e),n instanceof Bn){let r=ie.fromString(e,...t);return nh(r),new yt(n,null,r)}{if(!(n instanceof ye||n instanceof yt))throw new R(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return nh(r),new yt(n.firestore,null,r)}}function Wn(n,e,...t){if(n=Ye(n),arguments.length===1&&(e=nn.newId()),qh("doc","path",e),n instanceof Bn){let r=ie.fromString(e,...t);return th(r),new ye(n,null,new F(r))}{if(!(n instanceof ye||n instanceof yt))throw new R(A.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return th(r),new ye(n.firestore,n instanceof yt?n.converter:null,new F(r))}}var Fh="AsyncQueue",us=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ns(this,"async_queue_retry"),this._c=()=>{let r=Yo();r&&D(Fh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Yo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Yo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ze;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kn(e))throw e;D(Fh,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wt("INTERNAL UNHANDLED ERROR: ",Lh(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=uc.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&B(47125,{Pc:Lh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Lh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Tt=class extends Bn{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new us,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new us(e),this._firestoreClient=void 0,await e}}};function Hc(n,e){let t=typeof n=="object"?n:Qu(),r=typeof n=="string"?n:e||ji,i=Ku(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Pu("firestore");o&&uf(i,...o)}return i}function Is(n){if(n._terminated)throw new R(A.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||K_(n),n._firestoreClient}function K_(n){let e=n._freezeSettings(),t=$_(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new bc(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var it=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(be.fromBase64String(e))}catch(t){throw new R(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zn(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};it._jsonSchemaVersion="firestore/bytes/1.0",it._jsonSchema={type:le("string",it._jsonSchemaVersion),bytes:le("string")};var dn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new R(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qn=class{constructor(e){this._methodName=e}};var vt=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new R(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(zn(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};vt._jsonSchemaVersion="firestore/geoPoint/1.0",vt._jsonSchema={type:le("string",vt._jsonSchemaVersion),latitude:le("number"),longitude:le("number")};var st=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zn(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new R(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};st._jsonSchemaVersion="firestore/vectorValue/1.0",st._jsonSchema={type:le("string",st._jsonSchemaVersion),vectorValues:le("object")};var H_=/^__.*__$/,Ec=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new at(e,this.data,this.fieldMask,t,this.fieldTransforms):new ln(e,this.data,t,this.fieldTransforms)}},hs=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new at(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hf(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{dataSource:n})}}var Ic=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(z(z({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return fs(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(hf(this.dataSource)&&H_.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},Cc=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$r(e)}createContext(e,t,r,i=!1){return new Ic({dataSource:e,methodName:t,targetDoc:r,path:Me.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wc(n){let e=n._freezeSettings(),t=$r(n._databaseId);return new Cc(n._databaseId,!!e.ignoreUndefinedProperties,t)}function df(n,e,t,r,i,o={}){let a=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);Qc("Data must be an object, but it was:",a,r);let u=gf(r,a),h,f;if(o.merge)h=new Le(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let I=jn(e,v,t);if(!a.contains(I))throw new R(A.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);_f(m,I)||m.push(I)}h=new Le(m),f=a.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=a.fieldTransforms;return new Ec(new De(u),h,f)}var ds=class n extends qn{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ff(n,e,t,r){let i=n.createContext(1,e,t);Qc("Data must be an object, but it was:",i,r);let o=[],a=De.empty();qt(r,(h,f)=>{let m=Jc(e,h,t);f=Ye(f);let v=i.childContextForFieldPath(m);if(f instanceof ds)o.push(m);else{let I=Cs(f,v);I!=null&&(o.push(m),a.set(m,I))}});let u=new Le(o);return new hs(a,u,i.fieldTransforms)}function mf(n,e,t,r,i,o){let a=n.createContext(1,e,t),u=[jn(e,r,t)],h=[i];if(o.length%2!=0)throw new R(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)u.push(jn(e,o[I])),h.push(o[I+1]);let f=[],m=De.empty();for(let I=u.length-1;I>=0;--I)if(!_f(f,u[I])){let S=u[I],V=h[I];V=Ye(V);let O=a.childContextForFieldPath(S);if(V instanceof ds)f.push(S);else{let M=Cs(V,O);M!=null&&(f.push(S),m.set(S,M))}}let v=new Le(f);return new hs(m,v,a.fieldTransforms)}function Cs(n,e){if(pf(n=Ye(n)))return Qc("Unsupported field value:",e,n),gf(n,e);if(n instanceof qn)return(function(r,i){if(!hf(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],a=0;for(let u of r){let h=Cs(u,i.childContextForArray(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sp(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ue.fromDate(r);return{timestampValue:Qi(i.serializer,o)}}if(r instanceof ue){let o=new ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qi(i.serializer,o)}}if(r instanceof vt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof it)return{bytesValue:Rd(i.serializer,r._byteString)};if(r instanceof ye){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kc(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof st)return(function(a,u){let h=a instanceof st?a.toArray():a;return{mapValue:{fields:{[Sc]:{stringValue:xc},[Vn]:{arrayValue:{values:h.map(m=>{if(typeof m!="number")throw u.createError("VectorValues must only contain numeric values.");return Oc(u.serializer,m)})}}}}}})(r,i);if(Ud(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${gs(r)}`)})(n,e)}function gf(n,e){let t={};return id(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qt(n,(r,i)=>{let o=Cs(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pf(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ue||n instanceof vt||n instanceof it||n instanceof ye||n instanceof qn||n instanceof st||Ud(n))}function Qc(n,e,t){if(!pf(t)||!Gh(t)){let r=gs(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function jn(n,e,t){if((e=Ye(e))instanceof dn)return e._internalPath;if(typeof e=="string")return Jc(n,e);throw fs("Field path arguments must be of type string or ",n,!1,void 0,t)}var W_=new RegExp("[~\\*/\\[\\]]");function Jc(n,e,t){if(e.search(W_)>=0)throw fs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dn(...e.split("."))._internalPath}catch{throw fs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fs(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new R(A.INVALID_ARGUMENT,u+n+h)}function _f(n,e){return n.some(t=>t.isEqual(e))}var zr=class{convertValue(e,t="none"){switch(Lt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Et(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qt(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Vn].arrayValue?.values?.map(r=>re(r.doubleValue));return new st(t)}convertGeoPoint(e){return new vt(re(e.latitude),re(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ys(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nr(e));default:return null}}convertTimestamp(e){let t=bt(e);return new ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ie.fromString(e);J(Bd(r),9688,{name:e});let i=new Fr(r.get(1),r.get(3)),o=new F(r.popFirst(5));return i.isEqual(t)||wt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var ms=class extends zr{constructor(e){super(),this.firestore=e}convertBytes(e){return new it(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ye(this.firestore,null,t)}};var yf="@firebase/firestore",vf="4.10.0";var Ts=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Yc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(jn("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Yc=class extends Ts{data(){return super.data()}};function X_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new R(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Z_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Qn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jn=class n extends Ts{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Yn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(jn("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new R(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Jn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jn._jsonSchema={type:le("string",Jn._jsonSchemaVersion),bundleSource:le("string","DocumentSnapshot"),bundleName:le("string"),bundle:le("string")};var Yn=class extends Jn{data(e={}){return super.data(e)}},Xn=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yn(this._firestore,this._userDataWriter,r.key,r,new Qn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let h=new Yn(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Qn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let h=new Yn(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Qn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:ey(u.type),doc:h,oldIndex:f,newIndex:m}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new R(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function ey(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:n})}}Xn._jsonSchemaVersion="firestore/querySnapshot/1.0",Xn._jsonSchema={type:le("string",Xn._jsonSchemaVersion),bundleSource:le("string","QuerySnapshot"),bundleName:le("string"),bundle:le("string")};function wf(n){n=ct(n,Un);let e=ct(n.firestore,Tt),t=Is(e),r=new ms(e);return X_(n._query),of(t,n._query).then(i=>new Xn(e,r,n,i))}function bf(n,e,t){n=ct(n,ye);let r=ct(n.firestore,Tt),i=Z_(n.converter,e,t),o=Wc(r);return Xc(r,[df(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,nt.none())])}function Ef(n,e,t,...r){n=ct(n,ye);let i=ct(n.firestore,Tt),o=Wc(i),a;return a=typeof(e=Ye(e))=="string"||e instanceof dn?mf(o,"updateDoc",n._key,e,t,r):ff(o,"updateDoc",n._key,e),Xc(i,[a.toMutation(n._key,nt.exists(!0))])}function If(n){return Xc(ct(n.firestore,Tt),[new Ln(n._key,nt.none())])}function Xc(n,e){let t=Is(n);return af(t,e)}(function(e,t=!0){Bh(Wu),Ar(new mt("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new Tt(new ki(r.getProvider("auth-internal")),new Fi(a,r.getProvider("app-check-internal")),ld(a,i),a);return o=z({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Nt(yf,vf,e),Nt(yf,vf,"esm2020")})();var Cf={production:!1,firebase:{apiKey:"TU_API_KEY",authDomain:"TU_AUTH_DOMAIN",projectId:"TU_PROJECT_ID",storageBucket:"TU_STORAGE_BUCKET",messagingSenderId:"TU_MESSAGING_SENDER_ID",appId:"TU_APP_ID"}};var As=class n{app;db;playersCollection="players";constructor(){this.app=qo(Cf.firebase),this.db=Hc(this.app)}async getPlayers(){let e=Kc(this.db,this.playersCollection);return(await wf(e)).docs.map(r=>te(z({},r.data()),{id:r.id}))}async savePlayer(e){let t=Wn(this.db,this.playersCollection,e.id);await bf(t,{name:e.name,defense:e.defense,creation:e.creation,offense:e.offense,enabled:e.enabled})}async updatePlayer(e){let t=Wn(this.db,this.playersCollection,e.id);await Ef(t,{name:e.name,defense:e.defense,creation:e.creation,offense:e.offense,enabled:e.enabled})}async deletePlayer(e){let t=Wn(this.db,this.playersCollection,e);await If(t)}async savePlayers(e){let t=e.map(r=>this.savePlayer(r));await Promise.all(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Qt({token:n,factory:n.\u0275fac,providedIn:"root"})};var lt=class n{storageKey="futbol-players";goalkeeperService=xe(vn);firebaseService=xe(As);playersData=Ie(Eo);isInitialized=!1;players=Jt(()=>[...this.playersData()].sort((t,r)=>{if(t.enabled!==r.enabled)return t.enabled?-1:1;if(t.enabled&&r.enabled){let a=t.lastToggled||0,u=r.lastToggled||0;if(a!==u)return a-u}let i=t.order??Number.MAX_SAFE_INTEGER,o=r.order??Number.MAX_SAFE_INTEGER;return i!==o?i-o:t.name.localeCompare(r.name)}));separatedPairs=[["11","4"]];enabledPlayers=()=>this.players().filter(e=>e.enabled);disabledPlayers=()=>this.players().filter(e=>!e.enabled);async initializePlayers(){if(!this.isInitialized)try{let e=await this.firebaseService.getPlayers();e.length>0?this.playersData.set(e):await this.firebaseService.savePlayers(Eo),this.isInitialized=!0}catch(e){console.error("Error loading players from Firebase:",e);let t=localStorage.getItem(this.storageKey);t&&this.playersData.set(JSON.parse(t)),this.isInitialized=!0}}async savePlayers(){localStorage.setItem(this.storageKey,JSON.stringify(this.playersData()));try{await this.firebaseService.savePlayers(this.playersData())}catch(e){console.error("Error saving players to Firebase:",e)}}async addPlayer(e){let t=te(z({},e),{id:crypto.randomUUID(),enabled:!0});this.playersData.update(r=>[...r,t]),await this.savePlayers()}async togglePlayer(e){this.playersData.update(t=>t.map(r=>r.id===e?te(z({},r),{enabled:!r.enabled,lastToggled:Date.now()}):r)),await this.savePlayers()}async updatePlayer(e){this.playersData.update(t=>t.map(r=>r.id===e.id?e:r)),await this.savePlayers()}async deletePlayer(e){this.playersData.update(t=>t.filter(r=>r.id!==e)),await this.savePlayers()}getPlayerSkill(e){return e.defense+e.creation+e.offense}generateTeams(){let e=this.enabledPlayers();if(e.length<2)return[];for(let i=0;i<100;i++){let o=this.tryGenerateTeams(e);if(this.validateTeams(o))return this.distributeGoalkeepers(o),o}let r=this.tryGenerateTeams(e);return this.distributeGoalkeepers(r),r}distributeGoalkeepers(e){let t=this.goalkeeperService.selectedGoalkeepers();t.length===2&&e.length===2?(e[0].goalkeeper=t[0],e[1].goalkeeper=t[1]):t.length===1&&e.length>=1&&(e[0].goalkeeper=t[0])}tryGenerateTeams(e){let t=[{name:"Equipo 1",players:[],totalSkill:0},{name:"Equipo 2",players:[],totalSkill:0}],r=[{defense:0,creation:0,offense:0},{defense:0,creation:0,offense:0}],i=new Set;for(let[u,h]of this.separatedPairs){let f=e.find(v=>v.id===u),m=e.find(v=>v.id===h);if(f&&m&&!i.has(u)&&!i.has(h)){let v=Math.random()<.5?0:1;t[v].players.push(f),t[v].totalSkill+=this.getPlayerSkill(f),r[v].defense+=f.defense,r[v].creation+=f.creation,r[v].offense+=f.offense,t[1-v].players.push(m),t[1-v].totalSkill+=this.getPlayerSkill(m),r[1-v].defense+=m.defense,r[1-v].creation+=m.creation,r[1-v].offense+=m.offense,i.add(u),i.add(h)}}let o=e.filter(u=>!i.has(u.id)),a=this.shuffleArray(o);a.sort((u,h)=>this.getPlayerSkill(h)-this.getPlayerSkill(u));for(let u of a){let h=Math.abs(r[0].defense-r[1].defense),f=Math.abs(r[0].creation-r[1].creation),m=Math.abs(r[0].offense-r[1].offense),v=Math.abs(t[0].totalSkill-t[1].totalSkill),I=this.calculateImbalanceScore(r[0].defense+u.defense,r[1].defense,r[0].creation+u.creation,r[1].creation,r[0].offense+u.offense,r[1].offense),S=this.calculateImbalanceScore(r[0].defense,r[1].defense+u.defense,r[0].creation,r[1].creation+u.creation,r[0].offense,r[1].offense+u.offense),V=I<=S?0:1;this.canAddToTeam(u,t[V])||(V=1-V),t[V].players.push(u),t[V].totalSkill+=this.getPlayerSkill(u),r[V].defense+=u.defense,r[V].creation+=u.creation,r[V].offense+=u.offense}return t.forEach(u=>{u.players=this.shuffleArray(u.players)}),t}calculateImbalanceScore(e,t,r,i,o,a){let u=Math.abs(e-t),h=Math.abs(r-i),f=Math.abs(o-a);return u+h+f}canAddToTeam(e,t){let r=t.players.map(i=>i.id);for(let[i,o]of this.separatedPairs)if(e.id===i&&r.includes(o)||e.id===o&&r.includes(i))return!1;return!0}validateTeams(e){for(let t of e){let r=t.players.map(i=>i.id);for(let[i,o]of this.separatedPairs)if(r.includes(i)&&r.includes(o))return!1}return!0}shuffleArray(e){let t=[...e];for(let r=t.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[t[r],t[i]]=[t[i],t[r]]}return t}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Qt({token:n,factory:n.\u0275fac,providedIn:"root"})};function ty(n,e){if(n&1){let t=yn();ae(0,"button",2),br("click",function(){let i=ut(t).$implicit,o=ne();return ht(o.onStarClick(i))}),N(1," \u2605 "),ce()}if(n&2){let t=e.$implicit,r=ne();ze("filled",t<=r.value()),wr("disabled",r.readonly())}}var jt=class n{value=vo(0);readonly=vo(!1);valueChange=_u();stars=[1,2,3,4,5];onStarClick(e){this.readonly()||this.valueChange.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ne({type:n,selectors:[["app-star-rating"]],inputs:{value:[1,"value"],readonly:[1,"readonly"]},outputs:{valueChange:"valueChange"},decls:3,vars:0,consts:[[1,"star-rating"],["type","button",1,"star",3,"filled","disabled"],["type","button",1,"star",3,"click","disabled"]],template:function(t,r){t&1&&(ae(0,"div",0),Qe(1,ty,2,3,"button",1,pu),ce()),t&2&&(U(),Je(r.stars))},styles:[".star-rating[_ngcontent-%COMP%]{display:inline-flex;gap:2px}.star[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;cursor:pointer;color:#444;transition:color .2s,transform .2s;padding:0}.star.filled[_ngcontent-%COMP%]{color:#ffc107}.star[_ngcontent-%COMP%]:not(:disabled):hover{transform:scale(1.2)}.star[_ngcontent-%COMP%]:disabled{cursor:default}"]})};var ny=(n,e)=>e.id;function ry(n,e){n&1&&(L(0,"p",6),N(1,"No hay jugadores disponibles."),k())}function iy(n,e){if(n&1&&N(0),n&2){let t=ne().$implicit,r=ne(2);yo(" ",r.getEnabledIndex(t)+1," ")}}function sy(n,e){if(n&1){let t=yn();L(0,"tr")(1,"td",9),qe(2,iy,1,1),k(),L(3,"td",10)(4,"label",11)(5,"input",12),Ce("change",function(){let i=ut(t).$implicit,o=ne(2);return ht(o.togglePlayer(i.id))}),k(),Ge(6,"span",13),k()(),L(7,"td",14),N(8),k(),L(9,"td")(10,"app-star-rating",15),Ce("valueChange",function(i){let o=ut(t).$implicit,a=ne(2);return ht(a.updateSkill(o,"defense",i))}),k()(),L(11,"td")(12,"app-star-rating",15),Ce("valueChange",function(i){let o=ut(t).$implicit,a=ne(2);return ht(a.updateSkill(o,"creation",i))}),k()(),L(13,"td")(14,"app-star-rating",15),Ce("valueChange",function(i){let o=ut(t).$implicit,a=ne(2);return ht(a.updateSkill(o,"offense",i))}),k()(),L(15,"td",16),N(16),k()()}if(n&2){let t=e.$implicit,r=ne(2);ze("disabled-row",!t.enabled)("first-twelve",t.enabled&&r.getEnabledIndex(t)<12)("reserve-players",t.enabled&&r.getEnabledIndex(t)>=12),U(2),je(t.enabled?2:-1),U(3),Ve("checked",t.enabled),U(3),ke(t.name),U(2),Ve("value",t.defense)("readonly",!t.enabled),U(2),Ve("value",t.creation)("readonly",!t.enabled),U(2),Ve("value",t.offense)("readonly",!t.enabled),U(2),ke(r.getTotalSkill(t))}}function oy(n,e){if(n&1&&(L(0,"div",7)(1,"table")(2,"thead")(3,"tr")(4,"th"),N(5,"#"),k(),Ge(6,"th"),L(7,"th"),N(8,"Nombre"),k(),L(9,"th"),N(10,"Defensa"),k(),L(11,"th"),N(12,"Creaci\xF3n"),k(),L(13,"th"),N(14,"Ofensiva"),k(),L(15,"th"),N(16,"Total"),k()()(),L(17,"tbody"),Qe(18,sy,17,16,"tr",8,ny),k()()()),n&2){let t=ne();U(18),Je(t.players())}}var Ps=class n{playerService=xe(lt);players=this.playerService.players;enabledPlayers=this.playerService.enabledPlayers;disabledPlayers=this.playerService.disabledPlayers;async updateSkill(e,t,r){await this.playerService.updatePlayer(te(z({},e),{[t]:r}))}async deletePlayer(e){await this.playerService.deletePlayer(e)}async togglePlayer(e){await this.playerService.togglePlayer(e)}getTotalSkill(e){return this.playerService.getPlayerSkill(e)}getEnabledIndex(e){return this.enabledPlayers().findIndex(t=>t.id===e.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ne({type:n,selectors:[["app-player-list"]],decls:13,vars:3,consts:[[1,"player-list"],[1,"header"],[1,"counter"],[1,"counter-label"],[1,"counter-value"],[1,"counter-total"],[1,"empty-message"],[1,"table-container"],[3,"disabled-row","first-twelve","reserve-players"],[1,"number-cell"],[1,"checkbox-cell"],[1,"checkbox-container"],["type","checkbox",3,"change","checked"],[1,"checkmark"],[1,"player-name"],[3,"valueChange","value","readonly"],[1,"total-skill"]],template:function(t,r){t&1&&(L(0,"div",0)(1,"div",1)(2,"h2"),N(3,"Jugadores"),k(),L(4,"div",2)(5,"span",3),N(6,"Habilitados:"),k(),L(7,"span",4),N(8),k(),L(9,"span",5),N(10),k()()(),qe(11,ry,2,0,"p",6)(12,oy,20,0,"div",7),k()),t&2&&(U(8),ke(r.enabledPlayers().length),U(2),yo("/ ",r.players().length),U(),je(r.players().length===0?11:12))},dependencies:[jt],styles:['.player-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem;margin-bottom:1rem}}.player-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00d4ff;margin:0}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.player-list[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#00d4ff1a;border:1px solid rgba(0,212,255,.3);border-radius:8px;padding:.5rem 1rem}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{padding:.4rem .75rem;font-size:.9rem}}.player-list[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{color:#fffc;font-weight:500}.player-list[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{color:#00d4ff;font-weight:700;font-size:1.2rem}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{font-size:1.1rem}}.player-list[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]   .counter-total[_ngcontent-%COMP%]{color:#fff9;font-weight:500}.player-list[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;color:#fff9;padding:2rem}.player-list[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin:0 -1rem;padding:0 1rem}}.player-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#ffffff0d;border-radius:12px;overflow:hidden}.player-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .player-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid rgba(255,255,255,.1)}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .player-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem;font-size:.875rem}}.player-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#00d4ff1a;color:#00d4ff;font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.75rem;white-space:nowrap}}.player-list[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#ffffff08}.player-list[_ngcontent-%COMP%]   .disabled-row[_ngcontent-%COMP%]{opacity:.5}.player-list[_ngcontent-%COMP%]   .disabled-row[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{color:#fff9}.player-list[_ngcontent-%COMP%]   .disabled-row[_ngcontent-%COMP%]   .total-skill[_ngcontent-%COMP%]{color:#ffc10799}.player-list[_ngcontent-%COMP%]   .first-twelve[_ngcontent-%COMP%]{background-color:#90ee9026!important}.player-list[_ngcontent-%COMP%]   .first-twelve[_ngcontent-%COMP%]:hover{background-color:#90ee9040!important}.player-list[_ngcontent-%COMP%]   .reserve-players[_ngcontent-%COMP%]{background-color:#ffa50026!important}.player-list[_ngcontent-%COMP%]   .reserve-players[_ngcontent-%COMP%]:hover{background-color:#ffa50040!important}.player-list[_ngcontent-%COMP%]   .number-cell[_ngcontent-%COMP%]{width:50px;text-align:center;font-weight:700;color:#00d4ff;font-size:1rem}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .number-cell[_ngcontent-%COMP%]{width:40px;font-size:.9rem}}.player-list[_ngcontent-%COMP%]   .checkbox-cell[_ngcontent-%COMP%]{width:50px;text-align:center;padding:.5rem}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .checkbox-cell[_ngcontent-%COMP%]{width:40px;padding:.5rem .25rem}}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-block}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00d4ff,#7b2cbf);border-color:#00d4ff}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{display:block;height:20px;width:20px;background-color:#ffffff1a;border:2px solid rgba(255,255,255,.3);border-radius:4px;transition:all .3s}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{height:18px;width:18px}}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:6px;top:2px;width:5px;height:10px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:5px;top:1px;width:4px;height:9px}}.player-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]:hover   .checkmark[_ngcontent-%COMP%]{border-color:#00d4ff}.player-list[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{font-weight:500;color:#fff}.player-list[_ngcontent-%COMP%]   .total-skill[_ngcontent-%COMP%]{font-weight:700;color:#ffc107;font-size:1.1rem}.player-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{gap:.25rem}}.player-list[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{border-radius:8px;padding:.5rem .75rem;cursor:pointer;transition:all .3s;border:1px solid;background:#ff525233;border-color:#ff52524d}@media(max-width:768px){.player-list[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{padding:.4rem .6rem;font-size:.8rem}}.player-list[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background:#ff525266;transform:scale(1.1)}']})};var Rf=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(we(po),we(go))};static \u0275dir=Ue({type:n})}return n})(),ay=(()=>{class n extends Rf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=mo(n)))(i||n)}})();static \u0275dir=Ue({type:n,features:[Ot]})}return n})(),Of=new _n("");var cy={provide:Of,useExisting:yr(()=>Ns),multi:!0};function ly(){let n=bo()?bo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var uy=new _n(""),Ns=(()=>{class n extends Rf{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!ly())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(we(po),we(go),we(uy,8))};static \u0275dir=Ue({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ce("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Er([cy]),Ot]})}return n})();function hy(n){return n==null||dy(n)===0}function dy(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var tl=new _n(""),kf=new _n("");function fy(n){return hy(n.value)?{required:!0}:null}function Tf(n){return null}function Nf(n){return n!=null}function Ff(n){return gu(n)?du(n):n}function Lf(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function Bf(n,e){return e.map(t=>t(n))}function my(n){return!n.validate}function Uf(n){return n.map(e=>my(e)?e:t=>e.validate(t))}function gy(n){if(!n)return null;let e=n.filter(Nf);return e.length==0?null:function(t){return Lf(Bf(t,e))}}function nl(n){return n!=null?gy(Uf(n)):null}function py(n){if(!n)return null;let e=n.filter(Nf);return e.length==0?null:function(t){let r=Bf(t,e).map(Ff);return mu(r).pipe(fu(Lf))}}function rl(n){return n!=null?py(Uf(n)):null}function Af(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _y(n){return n._rawValidators}function yy(n){return n._rawAsyncValidators}function Zc(n){return n?Array.isArray(n)?n:[n]:[]}function xs(n,e){return Array.isArray(n)?n.includes(e):n===e}function Pf(n,e){let t=Zc(e);return Zc(n).forEach(i=>{xs(t,i)||t.push(i)}),t}function Sf(n,e){return Zc(e).filter(t=>!xs(n,t))}var Vs=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tr=class extends Vs{name;get formDirective(){return null}get path(){return null}},ei=class extends Vs{_parent=null;name=null;valueAccessor=null},Ds=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var qf=(()=>{class n extends Ds{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(we(ei,2))};static \u0275dir=Ue({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ot]})}return n})(),jf=(()=>{class n extends Ds{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(we(tr,10))};static \u0275dir=Ue({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ot]})}return n})();var Qr="VALID",Ss="INVALID",Zn="PENDING",Jr="DISABLED",Gt=class{},Ms=class extends Gt{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Xr=class extends Gt{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Zr=class extends Gt{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},er=class extends Gt{status;source;constructor(e,t){super(),this.status=e,this.source=t}},el=class extends Gt{source;constructor(e){super(),this.source=e}},Rs=class extends Gt{source;constructor(e){super(),this.source=e}};function Gf(n){return(Fs(n)?n.validators:n)||null}function vy(n){return Array.isArray(n)?nl(n):n||null}function zf(n,e){return(Fs(e)?e.asyncValidators:n)||null}function wy(n){return Array.isArray(n)?rl(n):n||null}function Fs(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function by(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new _i(1e3,"");if(!r[t])throw new _i(1001,"")}function Ey(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new _i(1002,"")})}var Os=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rt(this.statusReactive)}set status(e){Rt(()=>this.statusReactive.set(e))}_status=Jt(()=>this.statusReactive());statusReactive=Ie(void 0);get valid(){return this.status===Qr}get invalid(){return this.status===Ss}get pending(){return this.status==Zn}get disabled(){return this.status===Jr}get enabled(){return this.status!==Jr}errors;get pristine(){return Rt(this.pristineReactive)}set pristine(e){Rt(()=>this.pristineReactive.set(e))}_pristine=Jt(()=>this.pristineReactive());pristineReactive=Ie(!0);get dirty(){return!this.pristine}get touched(){return Rt(this.touchedReactive)}set touched(e){Rt(()=>this.touchedReactive.set(e))}_touched=Jt(()=>this.touchedReactive());touchedReactive=Ie(!1);get untouched(){return!this.touched}_events=new hu;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Pf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Pf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Sf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Sf(e,this._rawAsyncValidators))}hasValidator(e){return xs(this._rawValidators,e)}hasAsyncValidator(e){return xs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Zr(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Zr(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Xr(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Xr(!0,r))}markAsPending(e={}){this.status=Zn;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new er(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jr,this.errors=null,this._forEachChild(i=>{i.disable(te(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ms(this.value,r)),this._events.next(new er(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Qr,this._forEachChild(r=>{r.enable(te(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qr||this.status===Zn)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ms(this.value,t)),this._events.next(new er(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jr:Qr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Zn,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Ff(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new er(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vr,this.statusChanges=new vr}_calculateStatus(){return this._allControlsDisabled()?Jr:this.errors?Ss:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zn)?Zn:this._anyControlsHaveStatus(Ss)?Ss:Qr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Xr(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Zr(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fs(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vy(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=wy(this._rawAsyncValidators)}},ks=class extends Os{constructor(e,t,r){super(Gf(t),zf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ey(this,!0,e),Object.keys(e).forEach(r=>{by(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,te(z({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Rs(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var il=new _n("",{factory:()=>sl}),sl="always";function Iy(n,e){return[...e.path,n]}function $f(n,e,t=sl){Kf(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Ty(n,e),Py(n,e),Ay(n,e),Cy(n,e)}function xf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cy(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Kf(n,e){let t=_y(n);e.validator!==null?n.setValidators(Af(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=yy(n);e.asyncValidator!==null?n.setAsyncValidators(Af(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();xf(e._rawValidators,i),xf(e._rawAsyncValidators,i)}function Ty(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Hf(n,e)})}function Ay(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Hf(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Hf(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Py(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Sy(n,e){n==null,Kf(n,e)}function xy(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Vy(n){return Object.getPrototypeOf(n.constructor)===ay}function Dy(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function My(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ns?t=o:Vy(o)?r=o:i=o}),i||r||t||null}var Ry={provide:tr,useExisting:yr(()=>ol)},Yr=Promise.resolve(),ol=(()=>{class n extends tr{callSetDisabledState;get submitted(){return Rt(this.submittedReactive)}_submitted=Jt(()=>this.submittedReactive());submittedReactive=Ie(!1);_directives=new Set;form;ngSubmit=new vr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new ks({},nl(t),rl(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Yr.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),$f(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Yr.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Yr.then(()=>{let r=this._findContainer(t.path),i=new ks({});Sy(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Yr.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Yr.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Dy(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new el(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(we(tl,10),we(kf,10),we(il,8))};static \u0275dir=Ue({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ce("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Er([Ry]),Ot]})}return n})();function Vf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Df(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Oy=class extends Os{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Gf(t),zf(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fs(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Df(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Rs(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Df(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ky={provide:ei,useExisting:yr(()=>al)},Mf=Promise.resolve(),al=(()=>{class n extends ei{_changeDetectorRef;callSetDisabledState;control=new Oy;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vr;constructor(t,r,i,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=My(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),xy(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$f(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Mf.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&wo(r);Mf.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Iy(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(we(tr,9),we(tl,10),we(kf,10),we(Of,10),we(yu,8),we(il,8))};static \u0275dir=Ue({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Er([ky]),Ot,fo]})}return n})();var Wf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ue({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Ny=(()=>{class n{_validator=Tf;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Tf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ue({type:n,features:[fo]})}return n})();var Fy={provide:tl,useExisting:yr(()=>cl),multi:!0};var cl=(()=>{class n extends Ny{required;inputName="required";normalizeInput=wo;createValidator=t=>fy;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=mo(n)))(i||n)}})();static \u0275dir=Ue({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&yi("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Er([Fy]),Ot]})}return n})();var Ly=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=_o({type:n});static \u0275inj=ho({})}return n})();var Qf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:il,useValue:t.callSetDisabledState??sl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=_o({type:n});static \u0275inj=ho({imports:[Ly]})}return n})();var Ls=class n{playerService=xe(lt);name=Ie("");defense=Ie(3);creation=Ie(3);offense=Ie(3);async addPlayer(){this.name().trim()&&(await this.playerService.addPlayer({name:this.name().trim(),defense:this.defense(),creation:this.creation(),offense:this.offense()}),this.resetForm())}resetForm(){this.name.set(""),this.defense.set(3),this.creation.set(3),this.offense.set(3)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ne({type:n,selectors:[["app-player-form"]],decls:23,vars:5,consts:[[1,"player-form"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","Ingresa el nombre","required","",3,"ngModelChange","ngModel"],[1,"skills-group"],[1,"skill-item"],[3,"valueChange","value"],["type","submit",1,"btn-add",3,"disabled"]],template:function(t,r){t&1&&(L(0,"div",0)(1,"h2"),N(2,"Agregar Jugador"),k(),L(3,"form",1),Ce("ngSubmit",function(){return r.addPlayer()}),L(4,"div",2)(5,"label",3),N(6,"Nombre del jugador"),k(),L(7,"input",4),Ce("ngModelChange",function(o){return r.name.set(o)}),k()(),L(8,"div",5)(9,"div",6)(10,"label"),N(11,"Defensa"),k(),L(12,"app-star-rating",7),Ce("valueChange",function(o){return r.defense.set(o)}),k()(),L(13,"div",6)(14,"label"),N(15,"Creaci\xF3n"),k(),L(16,"app-star-rating",7),Ce("valueChange",function(o){return r.creation.set(o)}),k()(),L(17,"div",6)(18,"label"),N(19,"Ofensiva"),k(),L(20,"app-star-rating",7),Ce("valueChange",function(o){return r.offense.set(o)}),k()()(),L(21,"button",8),N(22," \u2795 Agregar Jugador "),k()()()),t&2&&(U(7),Ve("ngModel",r.name()),U(5),Ve("value",r.defense()),U(4),Ve("value",r.creation()),U(4),Ve("value",r.offense()),U(),Ve("disabled",!r.name().trim()))},dependencies:[Qf,Wf,Ns,qf,jf,cl,al,ol,jt],styles:[".player-form[_ngcontent-%COMP%]{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem}@media(max-width:768px){.player-form[_ngcontent-%COMP%]{padding:1.5rem;border-radius:12px}}.player-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00d4ff;margin-bottom:1.5rem}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}}.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}}.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#fffc;font-weight:500}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}}.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:#ffffff14;border:1px solid rgba(255,255,255,.2);border-radius:8px;color:#fff;font-size:1rem;transition:border-color .3s,box-shadow .3s;box-sizing:border-box}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.625rem .875rem;font-size:.9rem}}.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff6}.player-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff33}.player-form[_ngcontent-%COMP%]   .skills-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1.5rem;margin-bottom:1.5rem}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   .skills-group[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:1rem}}@media(max-width:480px){.player-form[_ngcontent-%COMP%]   .skills-group[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}}.player-form[_ngcontent-%COMP%]   .skills-group[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#fffc;font-weight:500;font-size:.9rem}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   .skills-group[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem}}.player-form[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(90deg,#00d4ff,#7b2cbf);border:none;border-radius:8px;color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:transform .3s,box-shadow .3s}@media(max-width:768px){.player-form[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{padding:.875rem;font-size:.9rem}}.player-form[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 20px #00d4ff66}.player-form[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};var Uy=(n,e)=>e.name,Jf=(n,e)=>e.id;function qy(n,e){n&1&&(ae(0,"p",4),N(1,"Se necesitan al menos 2 jugadores para generar equipos."),ce())}function jy(n,e){if(n&1&&(ae(0,"div",11)(1,"div",13)(2,"div",14)(3,"span",15),N(4,"\u{1F9E4}"),ce()(),ae(5,"div",16),N(6),ce(),ae(7,"div",17)(8,"div",18),N(9),ce()()()()),n&2){let t=ne().$implicit;U(6),ke(t.goalkeeper.skill),U(3),ke(t.goalkeeper.name)}}function Gy(n,e){n&1&&N(0," \u{1F6E1}\uFE0F ")}function zy(n,e){n&1&&N(0," \u{1F3AF} ")}function $y(n,e){n&1&&N(0," \u2694\uFE0F ")}function Ky(n,e){if(n&1&&(ae(0,"div",20)(1,"div",14)(2,"span",21),N(3),ce()(),ae(4,"div",22),N(5),ce(),ae(6,"div",17)(7,"div",18),N(8),ce(),ae(9,"div",23),qe(10,Gy,1,0)(11,zy,1,0)(12,$y,1,0),ce()()()),n&2){let t=e.$implicit,r=ne(5);yi("data-position",r.getPlayerPosition(t)),U(3),ke(r.getInitial(t.name)),U(2),ke(r.getPlayerSkill(t)),U(3),ke(t.name),U(2),je(r.getPlayerPosition(t)==="defense"?10:r.getPlayerPosition(t)==="creation"?11:12)}}function Hy(n,e){if(n&1&&(ae(0,"div",19),Qe(1,Ky,13,5,"div",20,Jf),ce()),n&2){let t=ne().$index,r=ne(),i=r.$implicit,o=r.$index,a=ne(2);U(),Je(a.getRowPlayers(a.getSortedPlayers(i.players,o===1),t))}}function Wy(n,e){if(n&1&&qe(0,Hy,3,0,"div",19),n&2){let t=e.$index;je(t%3===0?0:-1)}}function Qy(n,e){if(n&1&&(ae(0,"div",7)(1,"div",8)(2,"h3"),N(3),ce(),ae(4,"span",9),N(5),ce()(),ae(6,"div",10),qe(7,jy,10,2,"div",11),ae(8,"div",12),Qe(9,Wy,1,1,null,null,Jf),ce()()()),n&2){let t=e.$implicit,r=e.$index,i=ne(2);ze("team-two",r===1),U(3),ke(t.name),U(2),vi(" Total: ",t.totalSkill," | Prom: ",i.getSkillAverage(t)," "),U(2),je(t.goalkeeper?7:-1),U(2),Je(i.getSortedPlayers(t.players,r===1))}}function Jy(n,e){if(n&1&&(ae(0,"div",5),Qe(1,Qy,11,6,"div",6,Uy),ce()),n&2){let t=ne();U(),Je(t.teams())}}var Bs=class n{playerService=xe(lt);teams=Ie([]);players=this.playerService.players;generateTeams(){let e=this.playerService.generateTeams();this.teams.set(e)}generateTeamsAndScroll(){this.generateTeams(),setTimeout(()=>{let e=document.getElementById("teams-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100)}getSkillAverage(e){return e.players.length===0?0:Math.round(e.totalSkill/e.players.length*10)/10}getInitial(e){return e.charAt(0).toUpperCase()}getPlayerSkill(e){return e.defense+e.creation+e.offense}getPlayerPosition(e){return e.defense>=e.creation&&e.defense>=e.offense?"defense":e.creation>=e.offense?"creation":"offense"}getSortedPlayers(e,t=!1){return[...e].sort((r,i)=>{let o=t?{offense:0,creation:1,defense:2}:{defense:0,creation:1,offense:2},a=this.getPlayerPosition(r),u=this.getPlayerPosition(i);return o[a]-o[u]})}getRowPlayers(e,t){return e.slice(t,t+3)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ne({type:n,selectors:[["app-team-generator"]],decls:10,vars:4,consts:[[1,"team-generator"],[1,"config-section"],[1,"btn-generate",3,"click","disabled"],["title","Repartir Equipos",1,"btn-floating",3,"click","disabled"],[1,"warning"],["id","teams-section",1,"teams-grid"],[1,"team-card",3,"team-two"],[1,"team-card"],[1,"team-header"],[1,"team-stats"],[1,"formation-field"],[1,"formation-row","goalkeeper-row"],[1,"formation-rows"],[1,"player-avatar","goalkeeper"],[1,"avatar-circle"],[1,"goalkeeper-icon"],[1,"player-rating","goalkeeper-rating"],[1,"player-info"],[1,"player-name"],[1,"formation-row"],[1,"player-avatar"],[1,"player-initial"],[1,"player-rating"],[1,"player-position"]],template:function(t,r){t&1&&(ae(0,"div",0)(1,"h2"),N(2,"Generar Equipos"),ce(),ae(3,"div",1)(4,"button",2),br("click",function(){return r.generateTeams()}),N(5," \u{1F3B2} Repartir Equipos "),ce()(),ae(6,"button",3),br("click",function(){return r.generateTeamsAndScroll()}),N(7," \u26BD "),ce(),qe(8,qy,2,0,"p",4),qe(9,Jy,3,0,"div",5),ce()),t&2&&(U(4),wr("disabled",r.players().length<2),U(2),wr("disabled",r.players().length<2),U(2),je(r.players().length<2?8:-1),U(),je(r.teams().length>0?9:-1))},styles:[".team-generator[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00d4ff;margin-bottom:1.5rem}.team-generator[_ngcontent-%COMP%]   .config-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;align-items:flex-end;margin-bottom:2rem;padding:1.5rem;background:#ffffff0d;border-radius:12px}.team-generator[_ngcontent-%COMP%]   .config-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#fffc;font-weight:500}.team-generator[_ngcontent-%COMP%]   .config-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px;padding:.75rem 1rem;background:#ffffff14;border:1px solid rgba(255,255,255,.2);border-radius:8px;color:#fff;font-size:1rem;text-align:center}.team-generator[_ngcontent-%COMP%]   .config-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff33}.team-generator[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]{padding:.75rem 2rem;background:linear-gradient(90deg,#7b2cbf,#00d4ff);border:none;border-radius:8px;color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:transform .3s,box-shadow .3s}.team-generator[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 20px #7b2cbf66}.team-generator[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.team-generator[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:#ffc107;text-align:center;padding:1rem;background:#ffc1071a;border-radius:8px}.team-generator[_ngcontent-%COMP%]   .teams-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}.team-generator[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;overflow:hidden;transition:transform .3s,box-shadow .3s}.team-generator[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 30px #00d4ff26}.team-generator[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00d4ff33,#7b2cbf33);padding:1rem 1.25rem;display:flex;justify-content:space-between;align-items:center}.team-generator[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.1rem}.team-generator[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   .team-stats[_ngcontent-%COMP%]{font-size:.85rem;color:#ffc107;font-weight:500}.team-generator[_ngcontent-%COMP%]   .formation-field[_ngcontent-%COMP%]{background:linear-gradient(180deg,#228b224d,#228b221a);padding:2rem 1rem;min-height:400px;display:flex;flex-direction:column;gap:1.5rem}.team-generator[_ngcontent-%COMP%]   .formation-rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;flex:1;justify-content:space-evenly}.team-generator[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1.5rem;flex-wrap:wrap}.team-generator[_ngcontent-%COMP%]   .player-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;position:relative}.team-generator[_ngcontent-%COMP%]   .player-avatar.goalkeeper[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00d4ff,#09c);border-color:#00d4ff}.team-generator[_ngcontent-%COMP%]   .player-avatar[data-position=defense][_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%], .team-generator[_ngcontent-%COMP%]   .player-avatar[data-position=defense][_ngcontent-%COMP%]   .player-rating[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a90e2,#357abd);border-color:#4a90e2}.team-generator[_ngcontent-%COMP%]   .player-avatar[data-position=creation][_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%], .team-generator[_ngcontent-%COMP%]   .player-avatar[data-position=creation][_ngcontent-%COMP%]   .player-rating[_ngcontent-%COMP%]{background:linear-gradient(135deg,#50c878,#3da35d);border-color:#50c878}.team-generator[_ngcontent-%COMP%]   .player-avatar[data-position=offense][_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%], .team-generator[_ngcontent-%COMP%]   .player-avatar[data-position=offense][_ngcontent-%COMP%]   .player-rating[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);border-color:#ff6b6b}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,#ff6b6b,#ee5a6f);border:3px solid rgba(255,255,255,.3);display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;color:#fff;box-shadow:0 4px 12px #0000004d;transition:transform .3s}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .player-initial[_ngcontent-%COMP%]{font-size:1.8rem}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .goalkeeper-icon[_ngcontent-%COMP%]{font-size:2rem}.team-generator[_ngcontent-%COMP%]   .player-rating[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#ff6b6b;color:#fff;font-weight:700;font-size:.9rem;padding:.25rem .5rem;border-radius:12px;min-width:35px;text-align:center;box-shadow:0 2px 8px #0000004d}.team-generator[_ngcontent-%COMP%]   .player-rating.goalkeeper-rating[_ngcontent-%COMP%]{background:#00d4ff}.team-generator[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]{text-align:center;max-width:100px}.team-generator[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.team-generator[_ngcontent-%COMP%]   .player-position[_ngcontent-%COMP%]{font-size:.9rem;margin-top:.25rem}.team-generator[_ngcontent-%COMP%]   .btn-floating[_ngcontent-%COMP%]{display:none}@media(max-width:768px){.team-generator[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.team-generator[_ngcontent-%COMP%]   .config-section[_ngcontent-%COMP%]{padding:1rem;gap:1rem;margin-bottom:1.5rem;flex-direction:column;align-items:stretch}.team-generator[_ngcontent-%COMP%]   .config-item[_ngcontent-%COMP%]{width:100%}.team-generator[_ngcontent-%COMP%]   .config-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}.team-generator[_ngcontent-%COMP%]   .config-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.625rem .875rem;font-size:.9rem}.team-generator[_ngcontent-%COMP%]   .btn-generate[_ngcontent-%COMP%], .team-generator[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{width:100%;padding:.875rem;font-size:.9rem}.team-generator[_ngcontent-%COMP%]   .teams-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.team-generator[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]{padding:.875rem 1rem}.team-generator[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.team-generator[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   .team-stats[_ngcontent-%COMP%]{font-size:.8rem}.team-generator[_ngcontent-%COMP%]   .formation-field[_ngcontent-%COMP%]{padding:1.5rem .5rem;min-height:350px;gap:1rem}.team-generator[_ngcontent-%COMP%]   .team-two[_ngcontent-%COMP%]   .formation-field[_ngcontent-%COMP%]{flex-direction:column-reverse}.team-generator[_ngcontent-%COMP%]   .formation-rows[_ngcontent-%COMP%], .team-generator[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{gap:1rem}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:60px;height:60px}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .player-initial[_ngcontent-%COMP%]{font-size:1.5rem}.team-generator[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .goalkeeper-icon[_ngcontent-%COMP%]{font-size:1.7rem}.team-generator[_ngcontent-%COMP%]   .player-rating[_ngcontent-%COMP%]{font-size:.8rem;padding:.2rem .4rem;min-width:30px}.team-generator[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{font-size:.75rem;max-width:80px}.team-generator[_ngcontent-%COMP%]   .config-section[_ngcontent-%COMP%]{display:none}.team-generator[_ngcontent-%COMP%]   .btn-floating[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;bottom:2rem;right:2rem;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#7b2cbf,#00d4ff);border:none;color:#fff;font-size:2rem;box-shadow:0 4px 20px #7b2cbf80;cursor:pointer;z-index:1000;transition:transform .3s,box-shadow .3s}.team-generator[_ngcontent-%COMP%]   .btn-floating[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1);box-shadow:0 6px 30px #7b2cbfb3}.team-generator[_ngcontent-%COMP%]   .btn-floating[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.team-generator[_ngcontent-%COMP%]   .btn-floating[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}}"]})};var Yy=(n,e)=>e.id;function Xy(n,e){n&1&&(L(0,"p",2),N(1,"No hay arqueros disponibles"),k())}function Zy(n,e){if(n&1){let t=yn();L(0,"div",5)(1,"div",6)(2,"label",7)(3,"input",8),Ce("change",function(){let i=ut(t).$implicit,o=ne(2);return ht(o.toggleGoalkeeper(i.id))}),k(),Ge(4,"span",9),k(),L(5,"h3"),N(6),k()(),L(7,"div",10)(8,"span",11),N(9,"Habilidad:"),k(),Ge(10,"app-star-rating",12),k()()}if(n&2){let t=e.$implicit,r=ne(2);ze("selected",t.selected),U(3),Ve("checked",t.selected)("disabled",!r.canSelect(t.id)),U(3),ke(t.name),U(4),Ve("value",t.skill)("readonly",!0)}}function ev(n,e){if(n&1&&(L(0,"div",3),Qe(1,Zy,11,7,"div",4,Yy),k()),n&2){let t=ne();U(),Je(t.goalkeepers())}}var Us=class n{goalkeeperService=xe(vn);goalkeepers=this.goalkeeperService.goalkeepers;selectedCount=()=>this.goalkeeperService.selectedGoalkeepers().length;maxSelected=this.goalkeeperService.maxSelected;toggleGoalkeeper(e){this.goalkeeperService.toggleGoalkeeper(e)}canSelect(e){return this.goalkeeperService.canSelect(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ne({type:n,selectors:[["app-goalkeeper-list"]],decls:8,vars:3,consts:[[1,"goalkeeper-list"],[1,"selection-info"],[1,"empty-message"],[1,"goalkeepers-grid"],[1,"goalkeeper-card",3,"selected"],[1,"goalkeeper-card"],[1,"goalkeeper-header"],[1,"checkbox-container"],["type","checkbox",3,"change","checked","disabled"],[1,"checkmark"],[1,"goalkeeper-skill"],[1,"skill-label"],[3,"value","readonly"]],template:function(t,r){t&1&&(L(0,"div",0)(1,"h2"),N(2,"\u26BD Arqueros"),k(),L(3,"div",1)(4,"p"),N(5),k()(),qe(6,Xy,2,0,"p",2)(7,ev,3,0,"div",3),k()),t&2&&(U(5),vi("Selecciona exactamente 2 arqueros (",r.selectedCount(),"/",r.maxSelected,")"),U(),je(r.goalkeepers().length===0?6:7))},dependencies:[jt],styles:['.goalkeeper-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00d4ff;margin-bottom:1rem}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.goalkeeper-list[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{background:#00d4ff1a;border:1px solid rgba(0,212,255,.3);border-radius:8px;padding:1rem;margin-bottom:1.5rem}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{padding:.875rem}}.goalkeeper-list[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#00d4ff;font-weight:500;text-align:center}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}.goalkeeper-list[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;color:#fff9;padding:2rem}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeepers-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   .goalkeepers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-card[_ngcontent-%COMP%]{background:#ffffff0d;border:2px solid rgba(255,255,255,.1);border-radius:12px;padding:1.25rem;transition:all .3s}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-card[_ngcontent-%COMP%]{padding:1rem}}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-card[_ngcontent-%COMP%]:hover{border-color:#00d4ff4d;transform:translateY(-2px)}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-card.selected[_ngcontent-%COMP%]{border-color:#00d4ff;background:#00d4ff1a;box-shadow:0 4px 20px #00d4ff33}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.1rem;flex:1}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;-webkit-user-select:none;user-select:none;display:block}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00d4ff,#7b2cbf);border-color:#00d4ff}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{display:block;height:24px;width:24px;background-color:#ffffff1a;border:2px solid rgba(255,255,255,.3);border-radius:6px;transition:all .3s}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:8px;top:4px;width:6px;height:12px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.goalkeeper-list[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%]:not(:disabled) ~ .checkmark[_ngcontent-%COMP%]{border-color:#00d4ff}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-skill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-skill[_ngcontent-%COMP%]   .skill-label[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.9rem;font-weight:500}@media(max-width:768px){.goalkeeper-list[_ngcontent-%COMP%]   .goalkeeper-skill[_ngcontent-%COMP%]   .skill-label[_ngcontent-%COMP%]{font-size:.85rem}}']})};var Yf=class n{playerService=xe(lt);async ngOnInit(){await this.playerService.initializePlayers()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ne({type:n,selectors:[["app-landing"]],decls:32,vars:0,consts:[[1,"landing"],[1,"landing__header"],[1,"landing__nav"],[1,"landing__logo"],[1,"landing__logo-icon"],[1,"landing__logo-text"],[1,"landing__menu"],["href","#players"],["href","#goalkeepers"],["href","#teams"],[1,"landing__main"],["id","players",1,"landing__section"],[1,"landing__grid"],[1,"landing__grid-main"],[1,"landing__grid-side"],["id","goalkeepers",1,"landing__section"],["id","teams",1,"landing__section"],[1,"landing__footer"]],template:function(t,r){t&1&&(L(0,"div",0)(1,"header",1)(2,"nav",2)(3,"div",3)(4,"span",4),N(5,"\u26BD"),k(),L(6,"span",5),N(7,"F\xFAtbol CLI"),k()(),L(8,"ul",6)(9,"li")(10,"a",7),N(11,"Jugadores"),k()(),L(12,"li")(13,"a",8),N(14,"Arqueros"),k()(),L(15,"li")(16,"a",9),N(17,"Equipos"),k()()()()(),L(18,"main",10)(19,"section",11)(20,"div",12)(21,"div",13),Ge(22,"app-player-list"),k(),L(23,"div",14),Ge(24,"app-player-form"),k()()(),L(25,"section",15),Ge(26,"app-goalkeeper-list"),k(),L(27,"section",16),Ge(28,"app-team-generator"),k()(),L(29,"footer",17)(30,"p"),N(31,"\xA9 2026 F\xFAtbol CLI - Organiza tus partidos"),k()()())},dependencies:[Ps,Ls,Bs,Us],styles:[".landing[_ngcontent-%COMP%]{min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);color:#fff}.landing__header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100;background:#1a1a2ef2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.1)}.landing__nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:1rem 2rem}@media(max-width:768px){.landing__nav[_ngcontent-%COMP%]{padding:1rem}}.landing__logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem;font-weight:700}@media(max-width:768px){.landing__logo[_ngcontent-%COMP%]{font-size:1.2rem}}.landing__logo-icon[_ngcontent-%COMP%]{font-size:2rem}@media(max-width:768px){.landing__logo-icon[_ngcontent-%COMP%]{font-size:1.5rem}}.landing__logo-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00d4ff,#7b2cbf);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.landing__menu[_ngcontent-%COMP%]{display:flex;list-style:none;gap:2rem;margin:0;padding:0}@media(max-width:768px){.landing__menu[_ngcontent-%COMP%]{gap:1rem;font-size:.9rem}}@media(max-width:480px){.landing__menu[_ngcontent-%COMP%]{gap:.75rem;font-size:.85rem}}.landing__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{white-space:nowrap}.landing__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:color .3s}.landing__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00d4ff}.landing__main[_ngcontent-%COMP%]{padding-top:80px}.landing__hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;min-height:calc(100vh - 80px);max-width:1200px;margin:0 auto;padding:2rem;gap:2rem}@media(max-width:768px){.landing__hero[_ngcontent-%COMP%]{padding:2rem 1rem;min-height:auto}}.landing__hero-content[_ngcontent-%COMP%]{flex:1}.landing__hero-image[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.landing__title[_ngcontent-%COMP%]{font-size:3.5rem;line-height:1.2;margin-bottom:1.5rem}@media(max-width:768px){.landing__title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}}@media(max-width:480px){.landing__title[_ngcontent-%COMP%]{font-size:1.75rem}}.landing__highlight[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00d4ff,#7b2cbf);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.landing__subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:#fffc;margin-bottom:2rem;max-width:500px}@media(max-width:768px){.landing__subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1.5rem}}.landing__cta[_ngcontent-%COMP%]{display:flex;gap:1rem}.landing__btn[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1rem;font-weight:600;border:none;border-radius:50px;cursor:pointer;transition:transform .3s,box-shadow .3s}@media(max-width:768px){.landing__btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem;font-size:.9rem;width:100%}}.landing__btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.landing__btn--primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00d4ff,#7b2cbf);color:#fff;box-shadow:0 4px 20px #00d4ff66}.landing__btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #00d4ff99}.landing__btn--secondary[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid rgba(255,255,255,.3)}.landing__btn--secondary[_ngcontent-%COMP%]:hover{border-color:#00d4ff;color:#00d4ff}.landing__ball-animation[_ngcontent-%COMP%]{font-size:10rem;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}.landing__section-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:3rem;background:linear-gradient(90deg,#00d4ff,#7b2cbf);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}@media(max-width:768px){.landing__section-title[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:2rem}}.landing__section[_ngcontent-%COMP%]{padding:3rem 2rem;max-width:1200px;margin:0 auto}@media(max-width:768px){.landing__section[_ngcontent-%COMP%]{padding:2rem 1rem}}.landing__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;gap:2rem}@media(max-width:900px){.landing__grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}}.landing__grid-main[_ngcontent-%COMP%]{min-width:0}.landing__grid-side[_ngcontent-%COMP%]{position:sticky;top:100px;align-self:start}.landing__footer[_ngcontent-%COMP%]{padding:2rem;text-align:center;background:#0000004d;color:#fff9}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-30px)}}@media(max-width:768px){.landing__hero[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.landing__subtitle[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.landing__cta[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;width:100%}.landing__ball-animation[_ngcontent-%COMP%]{font-size:6rem}.landing__menu[_ngcontent-%COMP%]{display:none}}"]})};export{Yf as Landing};
